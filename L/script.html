<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2113.65">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    span.s1 {font: 12.0px 'Apple Color Emoji'}
  </style>
</head>
<body>
<p class="p1">// --- ZEYNAL Ã–ÄRETMEN V70 (FIREBASE REAL-TIME EDITION) ---</p>
<p class="p2"><br></p>
<p class="p1">// 1. FIREBASE YAPILANDIRMASI</p>
<p class="p1">const firebaseConfig = {</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>apiKey: "AIzaSyAP9qwq7rGzgruRI0tDv9s9bUKl5GWOXqo",</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>authDomain: "veri-8e938.firebaseapp.com",</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>projectId: "veri-8e938",</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>storageBucket: "veri-8e938.firebasestorage.app",</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>messagingSenderId: "155483919432",</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>appId: "1:155483919432:web:3fa53293603368c037347d"</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">// Firebase BaÅŸlatma</p>
<p class="p1">firebase.initializeApp(firebaseConfig);</p>
<p class="p1">const db = firebase.firestore();</p>
<p class="p2"><br></p>
<p class="p1">// Global DeÄŸiÅŸkenler</p>
<p class="p1">let settings = { classTarget: 830, silverLimit: 4, goldLimit: 6 }; // VarsayÄ±lanlar resimdeki gibi gÃ¼ncellendi</p>
<p class="p1">let students = [];<span class="Apple-converted-space">Â </span></p>
<p class="p1">let books = [];<span class="Apple-converted-space">Â </span></p>
<p class="p1">let bookPages = {};<span class="Apple-converted-space">Â </span></p>
<p class="p1">let records = [];<span class="Apple-converted-space">Â </span></p>
<p class="p1">let studentPassObj = {};</p>
<p class="p1">let teacherPassword = "14531453"; // VarsayÄ±lan ÅŸifre</p>
<p class="p1">let currentFilter = 'all';<span class="Apple-converted-space">Â </span></p>
<p class="p1">let statsSortMode = 'book_desc';<span class="Apple-converted-space">Â </span></p>
<p class="p1">let loginMode = 'teacher';<span class="Apple-converted-space">Â </span></p>
<p class="p1">let loggedInStudent = "";</p>
<p class="p1">let isDataLoaded = false;</p>
<p class="p1">let tempReturnId = null;</p>
<p class="p1">let currentRating = 0;</p>
<p class="p1">let isEditMode = false;</p>
<p class="p2"><br></p>
<p class="p1">// Sabitler</p>
<p class="p1">const RANKS = [{c:0, t:"<span class="s1">ğŸŒ±</span> BaÅŸlangÄ±Ã§"}, {c:5, t:"<span class="s1">ğŸ¥‰</span> Okuma Ã‡Ä±raÄŸÄ±"}, {c:10, t:"<span class="s1">ğŸ“–</span> Kitap Kurdu"},{c:15, t:"<span class="s1">ğŸš€</span> Bilgi KaÅŸifi"}, {c:20, t:"<span class="s1">ğŸ¹</span> Kelime AvcÄ±sÄ±"}, {c:25, t:"<span class="s1">ğŸ‘‘</span> KÃ¼tÃ¼phane MuhafÄ±zÄ±"},{c:30, t:"<span class="s1">ğŸ©</span> Edebiyat UstasÄ±"}, {c:35, t:"<span class="s1">ğŸŒ</span> Bilge Okur"}, {c:40, t:"<span class="s1">ğŸ’</span> EFSANE"}];</p>
<p class="p1">const EXIT_CARDS = {"1":{title:"Macera HatÄ±rasÄ±",prompt:"En unutulmaz sahne neydi?"},"2":{title:"Ã–ÄŸrenen Profil",prompt:"Karakter hangi Ã¶zelliÄŸi taÅŸÄ±yor?"},"3":{title:"Duygu KartÄ±",prompt:"Hangi duygularÄ± hissettin?"},"4":{title:"BaÄŸlantÄ± KartÄ±",prompt:"NasÄ±l bir baÄŸ kurdun?"},"5":{title:"EleÅŸtiri KartÄ±",prompt:"KatÄ±lmadÄ±ÄŸÄ±n bir olay var mÄ±?"},"6":{title:"Soru KartÄ±",prompt:"Seni dÃ¼ÅŸÃ¼ndÃ¼ren soru neydi?"},"7":{title:"YaratÄ±cÄ± Son",prompt:"Sonunu nasÄ±l deÄŸiÅŸtirirdin?"},"8":{title:"GeliÅŸim KartÄ±",prompt:"Hangi becerini geliÅŸtirdi?"},"9":{title:"Tavsiye KartÄ±",prompt:"Tavsiye eder misin?"}};</p>
<p class="p2"><br></p>
<p class="p1">// --- BAÅLANGIÃ‡ ---</p>
<p class="p1">window.onload = function() {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>console.log("Zeynal Ã–ÄŸretmen IÅŸÄ±k HÄ±zÄ± Modu Aktif! V70");</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if(localStorage.getItem('theme') === 'dark') {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document.body.classList.add('dark-mode');<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document.getElementById('themeIcon').innerText = '<span class="s1">â˜€ï¸</span>';<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// Ã‡Ä±kÄ±ÅŸ kartlarÄ±nÄ± yÃ¼kle</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>let select = document.getElementById('exitCardSelect');<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if(select) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>select.innerHTML = '&lt;option value=""&gt;Bir Kart SeÃ§...&lt;/option&gt;';<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>for (const [key, value] of Object.entries(EXIT_CARDS)) {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>let opt = document.createElement('option');<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>opt.value = key;<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>opt.innerText = value.title;<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>select.appendChild(opt);<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>startRealTimeSync();</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">// --- <span class="s1">ğŸ”¥</span> FIREBASE GERÃ‡EK ZAMANLI SENKRONÄ°ZASYON ---</p>
<p class="p1">function startRealTimeSync() {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// 1. AyarlarÄ± Dinle</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>db.collection("settings").doc("general").onSnapshot((doc) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (doc.exists) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>settings = doc.data();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>teacherPassword = settings.password || "14531453";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>updateUI();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// 2. Ã–ÄŸrencileri Dinle</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>db.collection("students").onSnapshot((querySnapshot) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>students = [];</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>studentPassObj = {};</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>querySnapshot.forEach((doc) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>let data = doc.data();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>students.push(doc.id);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>studentPassObj[doc.id] = data.password;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>students.sort();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>populateDatalists();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>updateUI();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// 3. KitaplarÄ± Dinle</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>db.collection("books").onSnapshot((querySnapshot) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>books = [];</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bookPages = {};</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>querySnapshot.forEach((doc) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>books.push(doc.id);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>bookPages[doc.id] = doc.data().pageCount;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>books.sort();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>populateDatalists();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>updateUI();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// 4. KayÄ±tlarÄ± Dinle (En Ã–nemli KÄ±sÄ±m)</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>db.collection("records").orderBy("timestamp", "desc").onSnapshot((querySnapshot) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>records = [];</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>querySnapshot.forEach((doc) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>let data = doc.data();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>data.id = doc.id; // Firestore belge ID'sini kullan</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>records.push(data);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>isDataLoaded = true;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document.getElementById('loader').style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document.getElementById('syncStatus').innerText = "AnlÄ±k BaÄŸlÄ± <span class="s1">âœ…</span>";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>updateUI();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if(loginMode === 'student' &amp;&amp; loggedInStudent) renderStudentPanel();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}, (error) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.error("Firebase HatasÄ±:", error);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document.getElementById('syncStatus').innerText = "BaÄŸlantÄ± Koptu <span class="s1">âŒ</span>";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">// --- VERÄ° YAZMA Ä°ÅLEMLERÄ° (FIREBASE) ---</p>
<p class="p1">function lendBook() {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const s = document.getElementById('studentInput').value.trim().toUpperCase();<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const b = document.getElementById('bookInput').value.trim();<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if(!s || !b) { alert("Eksik bilgi!"); return; }<span class="Apple-converted-space">Â </span></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const newRecord = {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>timestamp: firebase.firestore.FieldValue.serverTimestamp(),</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>date: getLocalTime(),</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>student: s,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>book: b,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>status: "Okuyor",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>returnDate: "-",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>rating: 0,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>comment: "",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>cardId: ""</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// KaydÄ± ekle</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>db.collection("records").add(newRecord).then(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document.getElementById('bookInput').value = "";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>handleInput(document.getElementById('bookInput'));</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">function submitReturn() {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if (!tempReturnId) return;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>let cardId = document.getElementById('exitCardSelect').value;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>let comment = document.getElementById('returnComment').value;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const updateData = {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>status: "Ä°ade Etti",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>returnDate: getLocalTime(),</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>rating: currentRating,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>cardId: cardId,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>cardTitle: cardId ? EXIT_CARDS[cardId].title : "",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>comment: comment</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>db.collection("records").doc(tempReturnId).update(updateData).then(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>closeRatingModal();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">// --- DÄ°ÄER FONKSÄ°YONLAR (ARAYÃœZ VE MANTIK) ---</p>
<p class="p1">function updateUI() {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>try {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>analyzeData();<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderHistory();<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderBookManager();<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderRanking();<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>updateProgressBar();<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if(document.getElementById('studentPassList')) renderPassManager();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>} catch(e) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.error("UI GÃ¼ncelleme HatasÄ±:", e);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">function analyzeData() {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>activeBooksMap = {};<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>lastHistoryMap = {};<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>records.forEach(r =&gt; {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let key = normalizeStr(r.book);<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if(r.status === "Okuyor") {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(!activeBooksMap[key]) activeBooksMap[key] = [];<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>activeBooksMap[key].push(r);<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else if (r.status === "Ä°ade Etti") {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(!lastHistoryMap[key]) lastHistoryMap[key] = { student: r.student, date: r.returnDate };<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});<span class="Apple-converted-space">Â </span></p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>let totalPagesRead = 0;<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>records.forEach(r =&gt; {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if(r.status === "Ä°ade Etti") totalPagesRead += (parseInt(bookPages[r.book]) || 0);<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if(document.getElementById('statTotalPages')) document.getElementById('statTotalPages').innerText = totalPagesRead.toLocaleString();<span class="Apple-converted-space">Â </span></p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">// ... (Buradan sonrasÄ± senin mevcut renderRanking, renderStudentPanel vb. fonksiyonlarÄ±nla aynÄ± kalacak) ...</p>
<p class="p1">// Not: syncData() fonksiyonuna artÄ±k ihtiyaÃ§ yok Ã§Ã¼nkÃ¼ Firebase her iÅŸlemi anÄ±nda senkronize eder.</p>
<p class="p2"><br></p>
<p class="p1">function deleteRecord(id) {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>if(confirm("Silmek istiyor musunuz?")) {<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>db.collection("records").doc(id).delete();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}<span class="Apple-converted-space">Â </span></p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">function normalizeStr(str) { return str ? str.toString().trim().replace(/\s+/g, ' ').toLocaleLowerCase('tr-TR') : ""; }</p>
<p class="p1">function getLocalTime() { let now = new Date(); return now.toLocaleDateString('tr-TR') + " " + now.toLocaleTimeString('tr-TR', {hour: '2-digit', minute:'2-digit'}); }</p>
<p class="p1">function handleInput(input) { let btn = input.nextElementSibling; if(btn &amp;&amp; btn.classList.contains('clear-btn')) { btn.style.display = input.value.length &gt; 0 ? 'block' : 'none'; } }</p>
<p class="p1">function toggleTheme() { document.body.classList.toggle('dark-mode'); let isDark = document.body.classList.contains('dark-mode'); document.getElementById('themeIcon').innerText = isDark ? '<span class="s1">â˜€ï¸</span>' : '<span class="s1">ğŸŒ™</span>'; localStorage.setItem('theme', isDark ? 'dark' : 'light'); }</p>
</body>
</html>
