<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camsı Tema - Sayı Atölyesi</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap');

        :root {
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            --white-color: #ffffff;
            --text-color: #f0f0f0;
            --correct-color: #4ade80;
            --incorrect-color: #f87171;
        }
        
        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        body {
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient-animation 15s ease infinite;
            color: var(--text-color);
        }

        .container {
            width: 100%;
            max-width: 650px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--shadow);
            position: relative;
        }
        
        .home-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            background: rgba(255, 255, 255, 0.2);
            color: var(--text-color);
            padding: 8px 15px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 14px;
            font-weight: 700;
            transition: background-color 0.3s, transform 0.2s;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .home-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24 }

        h1 {
            text-align: center;
            margin-top: 0;
            margin-bottom: 20px;
            font-weight: 800;
            text-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        .activity-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 700;
            transition: all 0.3s;
        }

        .nav-btn.active {
            transform: scale(1.05);
            color: white;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }

        .activity-view { display: none; }
        .activity-view.active { display: block; }
        
        .instruction { text-align: center; margin: 15px auto; font-size: 1.2em; font-weight: bold; max-width: 90%; text-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .feedback { margin-top: 15px; font-size: 1.2em; font-weight: bold; min-height: 30px; text-align: center; }
        .correct { color: var(--correct-color); }
        .incorrect { color: var(--incorrect-color); }

        .btn-group { text-align: center; margin-top: 20px; }
        .btn {
            background: rgba(255, 255, 255, 0.2);
            color: var(--white-color);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 700;
            transition: all 0.3s;
            margin: 5px;
        }
        .btn:hover { background: rgba(255, 255, 255, 0.3); transform: translateY(-2px); }
        .check-btn { background: rgba(40, 167, 69, 0.5); }
        .new-question-btn { background: rgba(0, 123, 255, 0.5); }

        footer { text-align: center; margin-top: 30px; font-weight: 400; color: rgba(255,255,255,0.7); }

        /* --- TEMA 1: SAYI SIRALAMA --- */
        #sort-activity .nav-btn.active { background-color: rgba(0, 123, 255, 0.4); }
        #sort-activity .clickable-number { font-weight: 800; cursor: pointer; padding: 5px 8px; border-radius: 5px; transition: background-color 0.2s; margin: 0 2px; }
        #sort-activity .clickable-number.selected { background-color: rgba(0, 123, 255, 0.7); color: white; }
        #sort-activity .clickable-number.used { text-decoration: line-through; opacity: 0.5; cursor: not-allowed; }
        #sort-activity .sort-container { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 5px; margin-top: 15px; }
        #sort-activity .target-box { width: 90px; height: 50px; border: 2px dashed rgba(255,255,255,0.5); border-radius: 10px; font-weight: 700; cursor: pointer; display: flex; justify-content: center; align-items: center; }
        #sort-activity .sort-container span { font-size: 2em; font-weight: 800; color: rgba(255,255,255,0.8); }
        #sort-activity .orientation-warning { display: none; align-items: center; justify-content: center; gap: 10px; text-align: center; padding: 20px; background: rgba(255, 193, 7, 0.2); border: 1px solid rgba(255, 193, 7, 0.5); border-radius: 10px; font-weight: bold; }
        
        /* --- TEMA 2: KARŞILAŞTIRMA --- */
        #compare-activity .nav-btn.active { background-color: rgba(253, 126, 20, 0.4); }
        #compare-activity .compare-wrapper { background: rgba(255, 255, 255, 0.1); border-radius: 15px; padding: 20px; margin-top: 20px; }
        #compare-activity .op-btn { font-size: 2em; font-weight: bold; width: 60px; height: 60px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.5); background: rgba(255,255,255,0.2); color: white; cursor: pointer; transition: all 0.2s; margin: 0 10px; }
        #compare-activity .op-btn:hover { background: rgba(253, 126, 20, 0.6); }
        #compare-activity .comparison-container { display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 20px; }
        #compare-activity .operator-choices { text-align: center; }
        #compare-activity .compare-number { font-size: 1.8em; font-weight: 800; }
        #compare-activity .operator-box { width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; font-size: 2em; font-weight: bold; }
        #compare-activity .operator-box .op-fly { position: absolute; transition: transform 0.4s ease-out; }

        /* --- TEMALAR & GENEL INPUT/BOX STİLLERİ --- */
        input[type="number"], .target-box {
            background: rgba(255,255,255,0.2); color: var(--text-color); border-radius: 10px; border: 1px solid rgba(255,255,255,0.3); text-align: center; font-family: 'Nunito', sans-serif; font-size: 1.1em;
        }
        input::placeholder { color: rgba(255,255,255,0.5); }
        input:focus { outline: 2px solid rgba(255,255,255,0.5); }
        
        /* --- TEMA 3: ARADAKİ SAYI --- */
        #between-activity .nav-btn.active { background-color: rgba(111, 66, 193, 0.4); }
        #between-activity .input-group { margin-bottom: 25px; text-align: center; }
        #between-activity .input-group label { font-weight: 700; margin-bottom: 8px; display: block; font-size: 1.1em; }
        #between-activity .inline-question { display: flex; justify-content: center; align-items: center; gap: 10px; font-size: 1.5em; font-weight: 800; }
        #between-activity .between-number { background: rgba(255,255,255,0.1); padding: 10px; border-radius: 10px; }
        #between-activity .inline-question input { width: 120px; padding: 10px; font-size: 1em; }
        
        /* --- TEMA 4: EKSİK RAKAM --- */
        #missing-activity .nav-btn.active { background-color: rgba(32, 201, 151, 0.4); }
        #missing-activity .missing-digit-container { display: flex; justify-content: center; align-items: center; gap: 15px; font-size: 1.8em; font-weight: 800; margin-block: 25px; flex-wrap: wrap; }
        #missing-activity .operator { opacity: 0.8; }
        #missing-activity .missing-placeholder { display: inline-block; width: 22px; height: 40px; border: 2px dashed rgba(255,255,255,0.6); border-radius: 5px; text-align: center; line-height: 40px; }
        #missing-activity .digit-pad { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin: 20px auto; max-width: 350px; }
        #missing-activity .digit-btn { width: 50px; height: 50px; font-size: 1.5em; font-weight: bold; border-radius: 50%; border: 2px solid rgba(255,255,255,0.5); background: rgba(255,255,255,0.2); color: white; cursor: pointer; transition: all 0.2s; }
        #missing-activity .digit-btn.selected { background: rgba(32, 201, 151, 0.7); border-color: white; }

        /* --- MOBİL UYUMLULUK --- */
        @media (max-width: 600px) {
            h1 { font-size: 1.8em; margin-top: 45px; }
            .home-btn { top: 15px; right: 15px; padding: 6px 12px; font-size: 12px; }
            #between-activity .inline-question { font-size: 1.2em; flex-wrap: wrap; }
            #between-activity .inline-question input { width: 80px; }
            @media (orientation: portrait) {
                #sort-activity .orientation-warning { display: flex; }
                #sort-activity .sort-content { display: none; }
            }
        }
    </style>
</head>
<body>

<div class="container" id="main-container">
    
    <a href="https://bilgihazinesi.github.io/" class="home-btn" title="Ana Sayfaya Dön">
        <span class="material-symbols-outlined">home</span> Ana Sayfa
    </a>

    <h1>Sayı Atölyesi</h1>
    <nav class="activity-nav">
        <button id="nav-sort" class="nav-btn active" onclick="showActivity('sort-activity')">Sayı Sırala</button>
        <button id="nav-compare" class="nav-btn" onclick="showActivity('compare-activity')">Sayı Karşılaştır</button>
        <button id="nav-between" class="nav-btn" onclick="showActivity('between-activity')">Aradaki Sayıyı Bul</button>
        <button id="nav-missing" class="nav-btn" onclick="showActivity('missing-activity')">Eksik Rakamı Bul</button>
    </nav>

    <div id="sort-activity" class="activity-view active">
        <div class="orientation-warning">
            <span class="material-symbols-outlined">screen_rotation</span>
            Lütfen bu etkinlik için telefonunuzu yatay konuma getirin.
        </div>
        <div class="sort-content">
            <p class="instruction" id="sort-instruction"></p>
            <p class="instruction">Sıralanacak Sayılar: <span id="sort-number-list"></span></p>
            <div class="sort-container" id="sort-container"></div>
            <div class="feedback" id="sort-feedback"></div>
            <div class="btn-group">
                <button class="btn check-btn" onclick="checkSort()">Kontrol Et</button>
                <button class="btn new-question-btn" onclick="startSortGame()">Yeni Soru</button>
            </div>
        </div>
    </div>

    <div id="compare-activity" class="activity-view">
        <div class="instruction">Doğru sembolü seçerek sayıları karşılaştır.</div>
        <div class="compare-wrapper">
            <div class="operator-choices">
                <button class="op-btn" onclick="selectOperator(this, '>')">&gt;</button>
                <button class="op-btn" onclick="selectOperator(this, '<')">&lt;</button>
                <button class="op-btn" onclick="selectOperator(this, '=')">=</button>
            </div>
            <div class="comparison-container">
                <div id="compare-num1" class="compare-number"></div>
                <div id="operator-box" class="operator-box"></div>
                <div id="compare-num2" class="compare-number"></div>
            </div>
        </div>
        <div class="feedback" id="compare-feedback"></div>
        <div class="btn-group">
            <button class="btn check-btn" onclick="checkCompare()">Kontrol Et</button>
            <button class="btn new-question-btn" onclick="startCompareGame()">Yeni Soru</button>
        </div>
    </div>
    
    <div id="between-activity" class="activity-view">
        <div class="instruction">Verilen aralıklara gelebilecek en büyük ve en küçük sayıları yaz.</div>
        <div class="input-group">
            <label for="min-input">En KÜÇÜK sayı:</label>
            <div class="inline-question">
                <span class="between-number" id="min-q-num1"></span>
                <span>&lt;</span>
                <input type="number" id="min-input">
                <span>&lt;</span>
                <span class="between-number" id="min-q-num2"></span>
            </div>
        </div>
        <div class="input-group">
            <label for="max-input">En BÜYÜK sayı:</label>
            <div class="inline-question">
                <span class="between-number" id="max-q-num1"></span>
                <span>&lt;</span>
                <input type="number" id="max-input">
                <span>&lt;</span>
                <span class="between-number" id="max-q-num2"></span>
            </div>
        </div>
        <div class="feedback" id="between-feedback"></div>
        <div class="btn-group">
            <button class="btn check-btn" onclick="checkBetween()">Kontrol Et</button>
            <button class="btn new-question-btn" onclick="startBetweenGame()">Yeni Soru</button>
        </div>
    </div>
    
    <div id="missing-activity" class="activity-view">
        <div class="instruction" id="missing-instruction"></div>
        <div class="missing-digit-container" id="missing-digit-container"></div>
        <div class="digit-pad" id="digit-selection-pad"></div>
        <div class="feedback" id="missing-feedback"></div>
        <div class="btn-group">
            <button class="btn check-btn" onclick="checkMissingDigit()">Kontrol Et</button>
            <button class="btn new-question-btn" onclick="startMissingDigitGame()">Yeni Soru</button>
        </div>
    </div>

    <footer>Zeynal Öğretmen'e teşekkürler</footer>
</div>

<script>
    const mainContainer = document.getElementById('main-container');

    let sortState = { numbers: [], direction: 'asc', correctOrder: [], selectedNumber: null };
    let compareState = { num1: 0, num2: 0, correctOp: '', selectedOp: null };
    let betweenState = { num1: 0, num2: 0, correctMin: 0, correctMax: 0 };
    let missingState = { possibleDigits: [] };

    const formatNumber = (num) => num.toLocaleString('tr-TR');

    function showActivity(activityId) {
        document.querySelectorAll('.activity-view').forEach(v => v.classList.remove('active'));
        document.getElementById(activityId).classList.add('active');
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(`nav-${activityId.split('-')[0]}`).classList.add('active');
        
        if (activityId === 'sort-activity') startSortGame();
        else if (activityId === 'compare-activity') startCompareGame();
        else if (activityId === 'between-activity') startBetweenGame();
        else if (activityId === 'missing-activity') startMissingDigitGame();
    }

    function generateRandomNumber(digits) {
        const min = Math.pow(10, digits - 1);
        const max = Math.pow(10, digits) - 1;
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    
    // --- BÖLÜM 1 & 2 & 3 (Değişiklik yok) ---
    function startSortGame() {
        sortState = { numbers: [], direction: 'asc', correctOrder: [], selectedNumber: null };
        const digits = 4;
        while(sortState.numbers.length < 5){
            const newNum = generateRandomNumber(digits);
            if(!sortState.numbers.includes(newNum)) sortState.numbers.push(newNum);
        }
        sortState.direction = Math.random() < 0.5 ? 'asc' : 'desc';
        document.getElementById('sort-instruction').textContent = sortState.direction === 'asc' ? 'Sayıları KÜÇÜKTEN BÜYÜĞE sırala!' : 'Sayıları BÜYÜKTEN KÜÇÜĞE sırala!';
        const numberList = document.getElementById('sort-number-list');
        numberList.innerHTML = '';
        sortState.numbers.forEach(num => {
            const numSpan = document.createElement('span');
            numSpan.textContent = formatNumber(num);
            numSpan.dataset.value = num;
            numSpan.classList.add('clickable-number');
            numSpan.onclick = () => selectSourceNumber(numSpan);
            numberList.appendChild(numSpan);
        });
        sortState.correctOrder = sortState.direction === 'asc' ? [...sortState.numbers].sort((a,b)=>a-b) : [...sortState.numbers].sort((a,b)=>b-a);
        const container = document.getElementById('sort-container');
        container.innerHTML = '';
        for (let i = 0; i < 5; i++) {
            const targetBox = document.createElement('div');
            targetBox.classList.add('target-box');
            targetBox.onclick = () => placeNumber(targetBox);
            container.appendChild(targetBox);
            if (i < 4) container.appendChild(document.createElement('span')).textContent = sortState.direction === 'asc' ? ' < ' : ' > ';
        }
        document.getElementById('sort-feedback').textContent = '';
    }
    function selectSourceNumber(numSpan) {
        if (numSpan.classList.contains('used')) return;
        document.querySelectorAll('.clickable-number').forEach(s => s.classList.remove('selected'));
        numSpan.classList.add('selected');
        sortState.selectedNumber = numSpan;
    }
    function placeNumber(targetBox) {
        if (targetBox.dataset.value) {
            const returnedValue = targetBox.dataset.value;
            const sourceSpan = document.querySelector(`.clickable-number[data-value='${returnedValue}']`);
            if (sourceSpan) sourceSpan.classList.remove('used');
            targetBox.textContent = '';
            targetBox.dataset.value = '';
        }
        if (sortState.selectedNumber) {
            targetBox.textContent = sortState.selectedNumber.textContent;
            targetBox.dataset.value = sortState.selectedNumber.dataset.value;
            sortState.selectedNumber.classList.add('used');
            sortState.selectedNumber.classList.remove('selected');
            sortState.selectedNumber = null;
        }
    }
    function checkSort() {
        const inputs = Array.from(document.querySelectorAll('.target-box')).map(box => parseInt(box.dataset.value));
        const feedback = document.getElementById('sort-feedback');
        if (inputs.some(isNaN)) {
            feedback.textContent = "Lütfen bütün kutuları doldur."; feedback.className = 'feedback incorrect'; return;
        }
        const isOrderCorrect = JSON.stringify(inputs) === JSON.stringify(sortState.correctOrder);
        if (isOrderCorrect) {
            feedback.textContent = "Harika! Tamamen doğru! 🎉"; feedback.className = 'feedback correct';
        } else {
            feedback.textContent = "Sıralama yanlış, tekrar kontrol et. 🤔"; feedback.className = 'feedback incorrect';
        }
    }
    function startCompareGame() {
        const digits = 5;
        compareState.num1 = generateRandomNumber(digits);
        compareState.num2 = Math.random() < 0.2 ? compareState.num1 : generateRandomNumber(digits);
        document.getElementById('compare-num1').textContent = formatNumber(compareState.num1);
        document.getElementById('compare-num2').textContent = formatNumber(compareState.num2);
        document.getElementById('operator-box').innerHTML = '';
        document.getElementById('compare-feedback').textContent = '';
        if (compareState.num1 > compareState.num2) compareState.correctOp = '>';
        else if (compareState.num1 < compareState.num2) compareState.correctOp = '<';
        else compareState.correctOp = '=';
        compareState.selectedOp = null;
    }
    function selectOperator(btn, op) {
        compareState.selectedOp = op;
        const box = document.getElementById('operator-box'); box.innerHTML = '';
        const flyingOp = document.createElement('span'); flyingOp.textContent = op; flyingOp.classList.add('op-fly');
        const btnRect = btn.getBoundingClientRect(); const boxRect = box.getBoundingClientRect();
        const startX = btnRect.left - boxRect.left + (btnRect.width/2) - 15; const startY = btnRect.top - boxRect.top + (btnRect.height/2) - 25;
        flyingOp.style.transform = `translate(${startX}px, ${startY}px) scale(1.5)`;
        box.appendChild(flyingOp);
        requestAnimationFrame(() => { flyingOp.style.transform = 'translate(0, 0) scale(1)'; });
    }
    function checkCompare() {
        const feedback = document.getElementById('compare-feedback');
        if (compareState.selectedOp === null) {
            feedback.textContent = "Lütfen bir sembol seç."; feedback.className = 'feedback incorrect'; return;
        }
        if (compareState.selectedOp === compareState.correctOp) {
            feedback.textContent = "Doğru seçim! Tebrikler! ✅"; feedback.className = 'feedback correct';
        } else {
            feedback.textContent = `Yanlış. Doğru cevap "${compareState.correctOp}" olmalıydı.`; feedback.className = 'feedback incorrect';
        }
    }
    function startBetweenGame() {
        const digits = 4;
        betweenState.num1 = generateRandomNumber(digits);
        betweenState.num2 = betweenState.num1 + Math.floor(Math.random() * 20) + 5;
        const formattedNum1 = formatNumber(betweenState.num1);
        const formattedNum2 = formatNumber(betweenState.num2);
        document.getElementById('min-q-num1').textContent = formattedNum1;
        document.getElementById('min-q-num2').textContent = formattedNum2;
        document.getElementById('max-q-num1').textContent = formattedNum1;
        document.getElementById('max-q-num2').textContent = formattedNum2;
        betweenState.correctMin = betweenState.num1 + 1;
        betweenState.correctMax = betweenState.num2 - 1;
        document.getElementById('min-input').value = '';
        document.getElementById('max-input').value = '';
        document.getElementById('between-feedback').textContent = '';
    }
    function checkBetween() {
        const minVal = parseInt(document.getElementById('min-input').value);
        const maxVal = parseInt(document.getElementById('max-input').value);
        const feedback = document.getElementById('between-feedback');
        if (isNaN(minVal) || isNaN(maxVal)) {
            feedback.textContent = "Lütfen her iki kutuyu da doldur."; feedback.className = 'feedback incorrect'; return;
        }
        const isMinCorrect = minVal === betweenState.correctMin; const isMaxCorrect = maxVal === betweenState.correctMax;
        if (isMinCorrect && isMaxCorrect) {
            feedback.textContent = "İkisi de doğru, harikasın! 🥳"; feedback.className = 'feedback correct';
        } else if (isMinCorrect) {
            feedback.textContent = "En küçük sayı doğru, ama en büyüğü hatalı."; feedback.className = 'feedback incorrect';
        } else if (isMaxCorrect) {
            feedback.textContent = "En büyük sayı doğru, ama en küçüğü hatalı."; feedback.className = 'feedback incorrect';
        } else {
            feedback.textContent = "Maalesef ikisi de yanlış, tekrar dene!"; feedback.className = 'feedback incorrect';
        }
    }

    // --- 4. EKSİK RAKAMI BUL (Yeniden Düzenlendi) ---
    function startMissingDigitGame() {
        document.getElementById('missing-instruction').innerHTML = `Karşılaştırmanın doğru olması için boşluğa gelebilecek <b>tüm rakamları</b> seç.`;
        const digits = 4;
        missingState.possibleDigits = [];
        let baseNumArr, referenceNum, operator, missingIndex;

        while (missingState.possibleDigits.length < 1 || missingState.possibleDigits.length > 5) {
            missingState.possibleDigits = [];
            baseNumArr = String(generateRandomNumber(digits)).split('');
            missingIndex = Math.floor(Math.random() * digits);
            const boundaryDigit = Math.floor(Math.random() * 8) + 1;
            const conditionType = Math.random() < 0.5 ? 'greater' : 'less';
            operator = Math.random() < 0.5 ? '>' : '<';
            
            let numA_arr = [...baseNumArr];
            numA_arr[missingIndex] = boundaryDigit;
            const numA = parseInt(numA_arr.join(''));
            let numB_arr = [...baseNumArr];
            const nextDigit = (conditionType === 'greater') ? boundaryDigit + 1 : boundaryDigit - 1;
            if (nextDigit < 0 || nextDigit > 9) continue;
            numB_arr[missingIndex] = nextDigit;
            const numB = parseInt(numB_arr.join(''));
            referenceNum = Math.floor(Math.random() * Math.abs(numA - numB)) + Math.min(numA, numB);
            if (referenceNum === Math.min(numA, numB) && Math.abs(numA - numB) > 1) referenceNum++;
            if (referenceNum <= 0) continue;
            
            for (let d = 0; d < 10; d++) {
                if (missingIndex === 0 && d === 0) continue;
                let tempArr = [...baseNumArr];
                tempArr[missingIndex] = d;
                const currentNum = parseInt(tempArr.join(''));
                const condition = operator === '>' ? (currentNum > referenceNum) : (currentNum < referenceNum);
                if (condition) missingState.possibleDigits.push(d);
            }
        }
        
        missingState.possibleDigits.sort((a,b)=>a-b);
        
        let parts = [...baseNumArr];
        parts[missingIndex] = `<span class="missing-placeholder">_</span>`;
        let numWithMissingHTML = parts.join('');

        const container = document.getElementById('missing-digit-container');
        const isMissingOnLeft = Math.random() < 0.5;
        const finalOperator = isMissingOnLeft ? operator : (operator === '>' ? '<' : '>');
        const missingNumDisplay = `<span>${numWithMissingHTML}</span>`;
        const referenceNumDisplay = `<span>${formatNumber(referenceNum)}</span>`;
        
        if (isMissingOnLeft) {
            container.innerHTML = `${missingNumDisplay} <span class="operator">${finalOperator}</span> ${referenceNumDisplay}`;
        } else {
            container.innerHTML = `${referenceNumDisplay} <span class="operator">${finalOperator}</span> ${missingNumDisplay}`;
        }
        
        const pad = document.getElementById('digit-selection-pad');
        pad.innerHTML = '';
        for (let i = 0; i < 10; i++) {
            const btn = document.createElement('button');
            btn.classList.add('digit-btn');
            btn.textContent = i;
            btn.dataset.digit = i;
            btn.onclick = () => btn.classList.toggle('selected');
            pad.appendChild(btn);
        }
        
        document.getElementById('missing-feedback').textContent = '';
    }

    function checkMissingDigit() {
        const selectedButtons = document.querySelectorAll('#digit-selection-pad .digit-btn.selected');
        const userSelection = Array.from(selectedButtons).map(btn => parseInt(btn.dataset.digit)).sort((a,b)=>a-b);
        
        const feedback = document.getElementById('missing-feedback');
        const isCorrect = JSON.stringify(userSelection) === JSON.stringify(missingState.possibleDigits);

        if (isCorrect) {
            feedback.textContent = "Doğru cevap! Harikasın! 🧠";
            feedback.className = 'feedback correct';
        } else {
            const correctDigitsStr = missingState.possibleDigits.join(', ');
            feedback.innerHTML = `Yanlış. Doğru rakamlar (${correctDigitsStr}) olmalıydı.`;
            feedback.className = 'feedback incorrect';
        }
    }

    window.onload = () => { showActivity('sort-activity'); };
</script>

</body>
</html>
