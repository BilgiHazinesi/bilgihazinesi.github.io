<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4-D Bölük ve Basamak Atölyesi</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #dfe6e9;
            --primary: #2d3436;
            --accent: #0984e3;
            --selected: #e17055;
            --success: #00b894;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: #2c3e50; font-family: 'Nunito', sans-serif; overflow: hidden;
        }

        #app-container {
            position: relative; width: 100vw; height: 100vh;
            background-color: var(--bg-color); display: flex; flex-direction: column;
        }

        /* Header */
        header {
            height: 80px; background: white; display: flex; align-items: center;
            justify-content: space-between; padding: 0 40px;
            border-bottom: 4px solid #b2bec3; font-size: 1.8rem; font-weight: 900; color: var(--primary);
        }

        /* Kontrol Paneli */
        .controls {
            padding: 20px; display: flex; gap: 20px; justify-content: center; background: #f1f2f6;
        }

        .btn {
            padding: 12px 30px; border: none; border-radius: 15px;
            font-size: 1.2rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2); transition: 0.2s; color: white;
        }
        .btn:active { transform: translateY(4px); box-shadow: none; }
        .btn-gen { background: var(--accent); }
        .btn-reset { background: var(--primary); }

        select {
            padding: 10px 20px; font-size: 1.2rem; border-radius: 10px; border: 2px solid #b2bec3; font-weight: bold;
        }

        /* Ana Alan */
        main {
            flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 20px; perspective: 1000px;
        }

        /* Bölük Kutuları */
        .boluk-container {
            display: flex; gap: 20px; margin-bottom: 40px; align-items: center;
        }

        .boluk-wrapper {
            display: flex; flex-direction: column; align-items: center; gap: 10px;
            transition: all 0.5s ease;
        }

        .boluk-label {
            font-size: 1.1rem; font-weight: 800; color: #636e72; text-transform: uppercase;
            letter-spacing: 1px;
        }

        .boluk-box {
            width: 160px; height: 120px;
            background: white; border-radius: 15px;
            display: flex; justify-content: center; align-items: center;
            font-size: 3.5rem; font-weight: 900; color: var(--primary);
            border: 5px solid #b2bec3; box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            cursor: pointer; position: relative; overflow: hidden;
        }

        .boluk-box:hover { transform: translateY(-5px); border-color: var(--accent); }

        /* Seçili Durum */
        .boluk-box.selected {
            border-color: var(--selected); background: #ffeaa7;
            animation: pulse 1s infinite;
        }

        /* Bölük İsimleri Renkleri */
        .type-birler { border-bottom: 5px solid #00b894; }
        .type-binler { border-bottom: 5px solid #0984e3; }
        .type-milyon { border-bottom: 5px solid #e17055; }
        .type-milyar { border-bottom: 5px solid #6c5ce7; }

        /* Okunuş Alanı */
        .reading-area {
            background: white; padding: 20px 40px; border-radius: 20px;
            font-size: 1.8rem; font-weight: bold; color: #2d3436;
            text-align: center; width: 80%; min-height: 60px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); border: 3px solid #dfe6e9;
            font-family: 'Patrick Hand', cursive;
        }

        .info-text {
            margin-top: 15px; font-size: 1.2rem; color: #636e72;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(225, 112, 85, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(225, 112, 85, 0); }
            100% { box-shadow: 0 0 0 0 rgba(225, 112, 85, 0); }
        }

        /* Basamakları küçük gösterme */
        .digit { display: inline-block; width: 30%; text-align: center; }

    </style>
</head>
<body>

<div id="app-container">
    <header>
        <span><i class="fas fa-cubes"></i> 4-D Bölük Atölyesi</span>
        <span style="font-size:1rem; color:#636e72">Tasarım: BilgiHazinesi</span>
    </header>

    <div class="controls">
        <select id="digit-select">
            <option value="7">7 Basamaklı (Milyonlar)</option>
            <option value="9">9 Basamaklı (Milyonlar)</option>
            <option value="10">10 Basamaklı (Milyarlar)</option>
            <option value="12" selected>12 Basamaklı (Milyarlar)</option>
        </select>
        <button class="btn btn-gen" onclick="generateNumber()"><i class="fas fa-random"></i> Sayı Üret</button>
    </div>

    <main>
        <div class="boluk-container" id="boluk-area">
            </div>

        <div class="reading-area" id="reading-text">
            Sayının okunuşu burada görünecek...
        </div>
        
        <div class="info-text">
            <i class="fas fa-info-circle"></i> İpucu: Yerlerini değiştirmek için iki farklı bölüğe sırasıyla tıklayın.
        </div>
    </main>
</div>

<script>
    // Uygulama Durumu
    let currentNumberParts = {
        milyarlar: 0,
        milyonlar: 0,
        binler: 0,
        birler: 0
    };
    
    let selectedPart = null; // Seçili olan bölük adı
    let isBillionsActive = true;

    const partsOrder = ['milyarlar', 'milyonlar', 'binler', 'birler'];
    const partLabels = {
        'milyarlar': 'Milyarlar Bölüğü',
        'milyonlar': 'Milyonlar Bölüğü',
        'binler': 'Binler Bölüğü',
        'birler': 'Birler Bölüğü'
    };
    const partColors = {
        'milyarlar': 'type-milyar',
        'milyonlar': 'type-milyon',
        'binler': 'type-binler',
        'birler': 'type-birler'
    };

    function generateNumber() {
        const digits = parseInt(document.getElementById('digit-select').value);
        
        // Sıfırlama
        selectedPart = null;
        
        // Rastgele Bölük Üretimi (1-999 arası veya 000)
        // Baştaki sayı 0 olamaz mantığı
        
        let p1, p2, p3, p4;

        if (digits <= 9) {
            currentNumberParts.milyarlar = null; // Yok
            // 7 basamak: Milyonlar 1-9 arası, diğerleri 0-999
            // 9 basamak: Milyonlar 100-999
            let minM = digits === 7 ? 1 : 100;
            let maxM = digits === 7 ? 9 : 999;
            
            currentNumberParts.milyonlar = Math.floor(Math.random() * (maxM - minM + 1)) + minM;
            currentNumberParts.binler = Math.floor(Math.random() * 1000);
            currentNumberParts.birler = Math.floor(Math.random() * 1000);
        } else {
            // 10-12 basamak
            let minB = digits === 10 ? 1 : 100;
            let maxB = digits === 10 ? 9 : 999;

            currentNumberParts.milyarlar = Math.floor(Math.random() * (maxB - minB + 1)) + minB;
            currentNumberParts.milyonlar = Math.floor(Math.random() * 1000);
            currentNumberParts.binler = Math.floor(Math.random() * 1000);
            currentNumberParts.birler = Math.floor(Math.random() * 1000);
        }

        renderBolukler();
        updateReading();
    }

    // Sayıyı 3 haneli string formatına çevirir (054 gibi)
    function formatPart(num) {
        if(num === null) return "";
        return num.toString().padStart(3, '0');
    }

    // Görseli Oluştur
    function renderBolukler() {
        const container = document.getElementById('boluk-area');
        container.innerHTML = '';

        partsOrder.forEach(key => {
            // Eğer Milyarlar null ise (yani 9 basamak seçildiyse) onu çizme
            if(currentNumberParts[key] === null) return;

            let val = currentNumberParts[key];
            let formattedVal = formatPart(val);

            let wrapper = document.createElement('div');
            wrapper.className = 'boluk-wrapper';
            
            // Etiket
            let label = document.createElement('div');
            label.className = 'boluk-label';
            label.innerText = partLabels[key];
            
            // Kutu
            let box = document.createElement('div');
            box.className = `boluk-box ${partColors[key]}`;
            box.onclick = () => handlePartClick(key);
            box.id = `box-${key}`;
            
            // İçerik (Rakamlar)
            box.innerHTML = formattedVal;

            wrapper.appendChild(box);
            wrapper.appendChild(label);
            container.appendChild(wrapper);
        });
    }

    // Tıklama ve Yer Değiştirme Mantığı
    function handlePartClick(key) {
        if (selectedPart === null) {
            // İlk seçim
            selectedPart = key;
            document.getElementById(`box-${key}`).classList.add('selected');
        } else if (selectedPart === key) {
            // Seçimi iptal et (aynısına tıkladı)
            document.getElementById(`box-${key}`).classList.remove('selected');
            selectedPart = null;
        } else {
            // İkinci seçim: Yer Değiştir
            swapParts(selectedPart, key);
            selectedPart = null;
        }
    }

    function swapParts(key1, key2) {
        // Değerleri değiştir
        let temp = currentNumberParts[key1];
        currentNumberParts[key1] = currentNumberParts[key2];
        currentNumberParts[key2] = temp;

        // Yeniden çiz
        renderBolukler();
        updateReading();
    }

    // Türkçeye Çevirme Fonksiyonu (Basitleştirilmiş)
    function numberToText(num) {
        if (num === 0) return "";
        const ones = ["", "Bir", "İki", "Üç", "Dört", "Beş", "Altı", "Yedi", "Sekiz", "Dokuz"];
        const tens = ["", "On", "Yirmi", "Otuz", "Kırk", "Elli", "Altmış", "Yetmiş", "Seksen", "Doksan"];
        
        let yuzler = Math.floor(num / 100);
        let onlar = Math.floor((num % 100) / 10);
        let birler = num % 10;
        
        let str = "";
        
        if (yuzler > 1) str += ones[yuzler] + " Yüz ";
        else if (yuzler === 1) str += "Yüz ";
        
        if (onlar > 0) str += tens[onlar] + " ";
        if (birler > 0) str += ones[birler];
        
        return str.trim();
    }

    function updateReading() {
        let text = "";
        
        // Milyarlar
        if(currentNumberParts.milyarlar !== null && currentNumberParts.milyarlar > 0) {
            text += numberToText(currentNumberParts.milyarlar) + " <span style='color:#6c5ce7'>Milyar</span> ";
        }
        
        // Milyonlar
        if(currentNumberParts.milyonlar > 0) {
            text += numberToText(currentNumberParts.milyonlar) + " <span style='color:#e17055'>Milyon</span> ";
        }
        
        // Binler
        if(currentNumberParts.binler > 0) {
            // Özel durum: "Bir Bin" denmez, sadece "Bin" denir (eğer sayı sadece 1 ise)
            if(currentNumberParts.binler === 1) text += " <span style='color:#0984e3'>Bin</span> ";
            else text += numberToText(currentNumberParts.binler) + " <span style='color:#0984e3'>Bin</span> ";
        } else if (currentNumberParts.binler === 0 && (currentNumberParts.milyonlar > 0 || currentNumberParts.milyarlar > 0)) {
            // Binler bölüğü 000 ise okunmaz
        }
        
        // Birler
        if(currentNumberParts.birler > 0) {
            text += numberToText(currentNumberParts.birler);
        }

        if(text === "") text = "Sıfır";

        document.getElementById('reading-text').innerHTML = text;
    }

    // Başlangıç
    generateNumber();

</script>
</body>
</html>
