<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etkileşimli Yuvarlama Macerası - PYP</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Crimson+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="stiller/stil.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <style>
        /* Bu sayfaya özel stiller, ana temaya uyarlandı */
        body {
            /* Ana temadan gelen fontu kullan */
            font-family: 'Crimson Pro', serif;
        }
        .container {
            width: 100%;
            max-width: 950px;
            margin: 0 auto;
        }
        .header, .section {
            background-color: var(--papyrus-bg-color-dark);
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 5px var(--shadow-color);
            border-left: 5px solid var(--accent-color);
        }
        h1, h2, h3 {
            font-family: 'Cinzel Decorative', cursive;
            color: var(--text-primary-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            margin-top: 0;
        }
        .pyp-intro {
            background-color: rgba(0,0,0,0.03);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px dashed var(--border-color);
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
        }
        .controls input[type="number"], .controls select, .controls button {
            padding: 12px 15px;
            font-size: 16px;
            font-family: 'Crimson Pro', serif;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background-color: var(--papyrus-bg-color-light);
        }
        .controls button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .controls button:hover {
            background-color: var(--text-primary-color);
        }
        .hill-container {
            position: relative;
            width: 100%;
            height: 200px;
            margin-top: 40px;
            overflow: hidden;
        }
        .hill-path {
            position: absolute;
            bottom: 20px;
            left: 10%;
            width: 80%;
            height: 150px;
            border: 3px dashed var(--border-color);
            border-radius: 50% / 100%;
            border-bottom: none;
            border-left-color: transparent;
            border-right-color: transparent;
        }
        .hill-label {
            position: absolute;
            bottom: -5px;
            font-weight: bold;
            font-size: 1.1em;
            background-color: var(--papyrus-bg-color-light);
            padding: 2px 8px;
            border-radius: 6px;
            border: 1px solid var(--text-primary-color);
        }
        .start-point { left: 5%; }
        .end-point { right: 5%; }
        .mid-point {
            left: 50%;
            transform: translateX(-50%);
            bottom: 130px;
            color: var(--accent-color);
            border-color: var(--accent-color);
        }
        .ball {
            position: absolute;
            font-size: 2.5em;
            transition: all 2s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            transform-origin: center 15px;
            color: var(--accent-color);
        }
        .explanation, #practice-feedback {
            margin-top: 20px;
            padding: 15px;
            background-color: var(--papyrus-bg-color-dark);
            border-radius: 8px;
            font-size: 1.1em;
            text-align: center;
            display: none;
        }
        #practice-feedback {
            font-weight: bold;
        }
        .correct { color: #2e7d32; }
        .incorrect { color: #a92a2a; }
    </style>
</head>
<body>

    <div id="menu-container"></div>

    <div class="container">
        <div class="header">
            <h1>Sayıları Yuvarlama Macerası</h1>
            <div class="pyp-intro">
                <p><strong>Merak Edelim:</strong> Markete gittiğinde alacaklarının yaklaşık ne kadar tutacağını veya stadyumdaki seyirci sayısını söylerken tam sayı vermek yerine "yaklaşık" bir değer kullanırız. İşte bu, yuvarlamadır! Sayıları daha basit ve anlaşılır hale getirmemize yarar.</p>
            </div>
        </div>

        <div class="section">
            <h2>Keşfet ve Gör: En Yakın Onluğa Yuvarlama</h2>
            <p>Aşağıya 3, 4, 5 veya 6 basamaklı bir sayı yaz. Topun hangi onluğa yuvarlandığını görerek keşfet!</p>
            <div class="controls">
                <input type="number" id="numberInputOnlar" placeholder="Sayıyı girin (örn: 1234)">
                <button onclick="startRounding('onlar')">Macerayı Başlat!</button>
            </div>
            <div class="hill-container">
                <div class="hill-path"></div>
                <div id="startPointOnlar" class="hill-label start-point"></div>
                <div id="midPointOnlar" class="hill-label mid-point"></div>
                <div id="endPointOnlar" class="hill-label end-point"></div>
                <div id="ballOnlar" class="ball">⚽</div>
            </div>
            <div id="explanationOnlar" class="explanation"></div>
        </div>

        <div class="section">
            <h2>Keşfet ve Gör: En Yakın Yüzlüğe Yuvarlama</h2>
            <p>Aşağıya 3, 4, 5 veya 6 basamaklı bir sayı yaz. Topun hangi yüzlüğe yuvarlandığını görerek keşfet!</p>
            <div class="controls">
                <input type="number" id="numberInputYuzler" placeholder="Sayıyı girin (örn: 12345)">
                <button onclick="startRounding('yuzler')">Macerayı Başlat!</button>
            </div>
            <div class="hill-container">
                <div class="hill-path"></div>
                <div id="startPointYuzler" class="hill-label start-point"></div>
                <div id="midPointYuzler" class="hill-label mid-point"></div>
                <div id="endPointYuzler" class="hill-label end-point"></div>
                <div id="ballYuzler" class="ball">🏀</div>
            </div>
            <div id="explanationYuzler" class="explanation"></div>
        </div>

        <div class="section">
            <h2>Sıra Sende: Bilgini Test Et!</h2>
            <p>Hadi öğrendiklerimizi pekiştirelim. Bakalım doğru yuvarlayabilecek misin?</p>
            <div class="controls">
                <button onclick="generatePractice()">Yeni Soru Getir</button>
                <h3 id="practiceQuestion" style="margin: 0; border: none; padding: 0;"></h3>
            </div>
            <div class="controls">
                <input type="number" id="practiceInput" placeholder="Cevabını yaz...">
                <button onclick="checkPractice()">Kontrol Et</button>
            </div>
            <div id="practice-feedback"></div>
        </div>
    </div>

    <script>
        // Bu sayfaya özel scriptleriniz korundu
        let practiceNumber = 0;
        let practiceRoundTo = 0;
        let practiceAnswer = 0;

        function startRounding(type) {
            const inputId = type === 'onlar' ? 'numberInputOnlar' : 'numberInputYuzler';
            const ballId = type === 'onlar' ? 'ballOnlar' : 'ballYuzler';
            const startPointId = type === 'onlar' ? 'startPointOnlar' : 'startPointYuzler';
            const midPointId = type === 'onlar' ? 'midPointOnlar' : 'midPointYuzler';
            const endPointId = type === 'onlar' ? 'endPointOnlar' : 'endPointYuzler';
            const explanationId = type === 'onlar' ? 'explanationOnlar' : 'explanationYuzler';
            const num = parseInt(document.getElementById(inputId).value);
            const roundTo = type === 'onlar' ? 10 : 100;
            if (isNaN(num) || num < 100 || num > 999999) {
                alert("Lütfen 3 ila 6 basamaklı bir sayı girin.");
                return;
            }
            const lowerBound = Math.floor(num / roundTo) * roundTo;
            const upperBound = lowerBound + roundTo;
            const midPointVal = lowerBound + roundTo / 2;
            document.getElementById(startPointId).innerText = lowerBound;
            document.getElementById(endPointId).innerText = upperBound;
            document.getElementById(midPointId).innerText = `${midPointVal} (Orta)`;
            const ball = document.getElementById(ballId);
            const explanation = document.getElementById(explanationId);
            const range = upperBound - lowerBound;
            let positionPercentage = (range === 0) ? 10 : ((num - lowerBound) / range) * 80 + 10;
            positionPercentage = Math.max(10, Math.min(90, positionPercentage));
            const yPos = 130 * Math.sin(Math.PI * (positionPercentage - 10) / 80);
            const rotation = 90 - (180 * (positionPercentage - 10) / 80);
            ball.style.transition = 'none';
            ball.style.left = `${positionPercentage}%`;
            ball.style.bottom = `${20 + yPos}px`;
            ball.style.transform = `translateX(-50%) rotate(${rotation}deg)`;
            explanation.style.display = 'none';
            setTimeout(() => {
                ball.style.transition = 'all 2s cubic-bezier(0.68, -0.55, 0.27, 1.55)';
                let explanationText = '';
                if (num >= midPointVal) {
                    ball.style.left = '90%';
                    ball.style.bottom = '20px';
                    ball.style.transform = 'translateX(-50%) rotate(0deg)';
                    explanationText = `${num} sayısı, orta nokta olan ${midPointVal}'e eşit veya büyük olduğu için ${upperBound}'a yuvarlandı!`;
                } else {
                    ball.style.left = '10%';
                    ball.style.bottom = '20px';
                    ball.style.transform = 'translateX(-50%) rotate(0deg)';
                    explanationText = `${num} sayısı, orta nokta olan ${midPointVal}'ten küçük olduğu için ${lowerBound}'a yuvarlandı!`;
                }
                setTimeout(() => {
                    explanation.innerText = explanationText;
                    explanation.style.display = 'block';
                }, 2000);
            }, 100);
        }

        function generatePractice() {
            const digits = Math.floor(Math.random() * 4) + 3;
            const min = Math.pow(10, digits - 1);
            const max = Math.pow(10, digits) - 1;
            practiceNumber = Math.floor(Math.random() * (max - min + 1)) + min;
            practiceRoundTo = Math.random() < 0.5 ? 10 : 100;
            document.getElementById('practiceQuestion').innerText = `${practiceNumber} sayısını en yakın ${practiceRoundTo === 10 ? 'onluğa' : 'yüzlüğe'} yuvarla.`;
            practiceAnswer = Math.round(practiceNumber / practiceRoundTo) * practiceRoundTo;
            document.getElementById('practiceInput').value = '';
            document.getElementById('practice-feedback').style.display = 'none';
        }

        function checkPractice() {
            const userAnswer = parseInt(document.getElementById('practiceInput').value);
            const feedback = document.getElementById('practice-feedback');
            if (isNaN(userAnswer)) {
                alert("Lütfen bir sayı girin.");
                return;
            }
            feedback.style.display = 'block';
            if (userAnswer === practiceAnswer) {
                feedback.innerText = "Harika! Cevabın doğru!";
                feedback.className = 'correct';
            } else {
                feedback.innerText = `Tekrar dene! Doğru cevap ${practiceAnswer} olmalıydı. İstersen yukarıdaki tepelerde ${practiceNumber} sayısını deneyerek nedenini keşfedebilirsin.`;
                feedback.className = 'incorrect';
            }
        }

        window.onload = () => {
            document.getElementById('ballOnlar').style.left = '10%';
            document.getElementById('ballOnlar').style.bottom = '20px';
            document.getElementById('startPointOnlar').innerText = "0";
            document.getElementById('endPointOnlar').innerText = "10";
            document.getElementById('midPointOnlar').innerText = "5 (Orta)";
            document.getElementById('ballYuzler').style.left = '10%';
            document.getElementById('ballYuzler').style.bottom = '20px';
            document.getElementById('startPointYuzler').innerText = "0";
            document.getElementById('endPointYuzler').innerText = "100";
            document.getElementById('midPointYuzler').innerText = "50 (Orta)";
            generatePractice();
        };
    </script>
    
    <script src="bilesenler/menu.js"></script>

</body>
</html>
