<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eğitim Materyali Hazırlama - Öğretmen Modu</title>
    <style>
        /* GENEL SAYFA DÜZENİ */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* SOL PANEL: ARAÇ ÇUBUĞU VE SAYFA */
        #workspace {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-y: auto;
        }

        /* Araç Çubuğu (Toolbar) */
        #toolbar {
            background-color: #333;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            width: fit-content;
        }

        #toolbar button, #toolbar select, #toolbar input[type="color"] {
            padding: 8px 12px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
            font-size: 14px;
        }

        #toolbar button:hover {
            background-color: #555;
            color: white;
        }

        /* A4 Kağıt Görünümü */
        #page-container {
            width: 794px; /* A4 Genişliği (96 DPI) */
            min-height: 1123px; /* A4 Yüksekliği */
            background-color: white;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            position: relative;
            padding: 40px;
            box-sizing: border-box;
            overflow: hidden; /* Taşmaları gizle */
        }

        /* SAĞ PANEL: GÖRSELLER (LİSTE GÖRÜNÜMÜ) */
        #sidebar {
            width: 300px;
            background-color: #fff;
            border-left: 1px solid #ddd;
            display: flex;
            flex-direction: column;
            box-shadow: -2px 0 5px rgba(0,0,0,0.05);
        }

        #sidebar h3 {
            padding: 15px;
            margin: 0;
            background-color: #eee;
            border-bottom: 1px solid #ccc;
            text-align: center;
        }

        #image-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            display: flex;
            flex-direction: column; /* LİSTE GÖRÜNÜMÜ (IZGARA DEĞİL) */
            gap: 15px;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 10px;
            border: 1px solid #eee;
            padding: 5px;
            border-radius: 5px;
            cursor: grab;
            background: #f9f9f9;
        }

        .sidebar-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
        }

        .sidebar-item span {
            font-size: 14px;
            font-weight: 500;
        }

        /* SAYFA İÇİ ELEMENTLER */
        .draggable-text {
            position: absolute;
            border: 1px dashed transparent;
            padding: 5px;
            cursor: move;
            min-width: 50px;
        }

        .draggable-text:hover, .draggable-text:focus {
            border: 1px dashed #007bff;
        }

        .draggable-image {
            position: absolute;
            cursor: move;
            resize: both; /* Sağ alt köşeden boyutlandırma */
            overflow: hidden;
            border: 1px dashed transparent;
        }

        .draggable-image:hover {
            border: 1px dashed #007bff;
        }
        
        .draggable-image img {
            width: 100%;
            height: 100%;
            pointer-events: none; /* Sürükleme çakışmasını önler */
        }

        /* SORU NUMARALANDIRMA */
        .question-number {
            font-weight: bold;
            color: #d32f2f;
            margin-right: 5px;
        }

        /* GİZLEME / GÖSTERME STİLİ (BURASI GÜNCELLENDİ) */
        .result-box {
            display: inline-block;
            padding: 2px 5px;
            border: 1px solid #ccc;
            min-width: 20px;
            text-align: center;
            background-color: transparent;
            color: black;
            transition: all 0.3s ease;
        }

        /* İSTEDİĞİN ÖZELLİK: GİZLENDİĞİNDE BEYAZ OLUYOR */
        .hidden-result {
            background-color: white !important; /* Arka plan beyaz */
            color: white !important; /* Yazı beyaz */
            border-color: white !important; /* Kenarlık da beyaz olsun ki hiç görünmesin */
            user-select: none; /* Seçilemesin */
        }

    </style>
</head>
<body>

    <div id="workspace">
        <div id="toolbar">
            <button onclick="addText()">Metin Ekle</button>
            <button onclick="addQuestion()">Soru Ekle (+No)</button>
            <button onclick="toggleResults()">Sonuçları Gizle/Göster</button>
            <div style="width: 1px; background: #666; margin: 0 5px;"></div>
            <button onclick="formatDoc('bold')"><b>B</b></button>
            <button onclick="formatDoc('italic')"><i>I</i></button>
            <button onclick="formatDoc('underline')"><u>U</u></button>
            <input type="color" onchange="formatDoc('foreColor', this.value)" title="Yazı Rengi">
            <div style="width: 1px; background: #666; margin: 0 5px;"></div>
            <button onclick="rotatePage()">Sayfayı Çevir (Yatay/Dikey)</button>
        </div>

        <div id="page-container" ondrop="drop(event)" ondragover="allowDrop(event)">
            <div class="draggable-text" style="top: 50px; left: 50px;" contenteditable="true">
                Başlık: 4. Sınıf Çalışma Kağıdı
            </div>
            
            <div class="draggable-text" style="top: 100px; left: 50px;" contenteditable="true">
                <span class="question-number">1.</span> <span class="result-box">12</span> x <span class="result-box">5</span> = <span class="result-box">60</span>
            </div>
        </div>
    </div>

    <div id="sidebar">
        <h3>Görseller</h3>
        <div id="image-list">
            <div class="sidebar-item" draggable="true" ondragstart="drag(event)" data-src="https://via.placeholder.com/150/FF5733/FFFFFF?text=Elma">
                <img src="https://via.placeholder.com/150/FF5733/FFFFFF?text=Elma" alt="Elma">
                <span>Elma Görseli</span>
            </div>
            <div class="sidebar-item" draggable="true" ondragstart="drag(event)" data-src="https://via.placeholder.com/150/33FF57/FFFFFF?text=Armut">
                <img src="https://via.placeholder.com/150/33FF57/FFFFFF?text=Armut" alt="Armut">
                <span>Armut Görseli</span>
            </div>
            <div class="sidebar-item" draggable="true" ondragstart="drag(event)" data-src="https://via.placeholder.com/150/3357FF/FFFFFF?text=Kalem">
                <img src="https://via.placeholder.com/150/3357FF/FFFFFF?text=Kalem" alt="Kalem">
                <span>Kalem Görseli</span>
            </div>
        </div>
    </div>

    <script>
        let questionCount = 1;
        let resultsHidden = false;

        // Metin Ekleme
        function addText() {
            const page = document.getElementById('page-container');
            const div = document.createElement('div');
            div.className = 'draggable-text';
            div.contentEditable = true;
            div.innerHTML = 'Yeni Metin';
            div.style.top = '50px';
            div.style.left = '50px';
            enableDrag(div);
            page.appendChild(div);
        }

        // Soru Ekleme (Otomatik Numaralı)
        function addQuestion() {
            questionCount++;
            const page = document.getElementById('page-container');
            const div = document.createElement('div');
            div.className = 'draggable-text';
            div.contentEditable = true;
            div.innerHTML = `<span class="question-number">${questionCount}.</span> Yeni Soru`;
            div.style.top = (questionCount * 40 + 50) + 'px'; // Alt alta gelsin diye basit hesap
            div.style.left = '50px';
            enableDrag(div);
            page.appendChild(div);
        }

        // Sonuçları Gizle/Göster
        function toggleResults() {
            resultsHidden = !resultsHidden;
            const boxes = document.querySelectorAll('.result-box');
            boxes.forEach(box => {
                if (resultsHidden) {
                    box.classList.add('hidden-result');
                } else {
                    box.classList.remove('hidden-result');
                }
            });
        }

        // Metin Biçimlendirme
        function formatDoc(cmd, value=null) {
            document.execCommand(cmd, false, value);
        }

        // Sayfa Döndürme
        function rotatePage() {
            const page = document.getElementById('page-container');
            const currentWidth = page.style.width;
            
            if (currentWidth === '1123px') { // Şu an yataysa, dikey yap
                page.style.width = '794px';
                page.style.minHeight = '1123px';
            } else { // Şu an dikeyse, yatay yap
                page.style.width = '1123px';
                page.style.minHeight = '794px';
            }
        }

        // Sürükle Bırak (Drag & Drop) İşlemleri
        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("src", ev.target.parentElement.getAttribute('data-src'));
        }

        function drop(ev) {
            ev.preventDefault();
            const src = ev.dataTransfer.getData("src");
            if (src) {
                const page = document.getElementById('page-container');
                
                // Resim Konteyneri
                const container = document.createElement('div');
                container.className = 'draggable-image';
                container.style.left = (ev.offsetX) + 'px';
                container.style.top = (ev.offsetY) + 'px';
                container.style.width = '150px';
                container.style.height = '150px';
                
                // Resim
                const img = document.createElement('img');
                img.src = src;
                
                container.appendChild(img);
                enableDrag(container);
                page.appendChild(container);
            }
        }

        // Sayfa içi öğeleri sürükleme mantığı (Basitleştirilmiş)
        function enableDrag(elmnt) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            elmnt.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                // Eğer içerik düzenleniyorsa (contenteditable) sürüklemeyi engelleme ama kenardan tutulursa sürükle
                if(e.target !== elmnt && e.target.contentEditable === "true") return;
                
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }
        
        // Mevcut öğeleri sürüklenebilir yap
        document.querySelectorAll('.draggable-text').forEach(enableDrag);
    </script>
</body>
</html>
