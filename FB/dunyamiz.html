<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DÃ¼nya'nÄ±n Hareketleri ve Mevsimler</title>
    <style>
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background-color: #050510; color: white; overflow-x: hidden; }
        
        /* Ãœst Bilgi */
        header {
            background: linear-gradient(90deg, #000428 0%, #004e92 100%);
            padding: 15px;
            text-align: center;
            border-bottom: 2px solid #ffd700;
        }
        h1 { margin: 0; color: #ffd700; font-size: 1.5rem; }
        p { margin: 5px; opacity: 0.8; font-size: 0.9rem; }

        /* 3D Sahne */
        #canvas-container {
            width: 100%;
            height: 55vh;
            position: relative;
            background: black;
            overflow: hidden;
        }
        
        /* Etiketler (Mevsimler/Aylar) */
        .label {
            position: absolute;
            color: white;
            font-weight: bold;
            background: rgba(0,0,0,0.6);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
            pointer-events: none;
            white-space: nowrap;
        }
        .season-label {
            font-size: 1rem;
            color: #ffd700;
            border: 1px solid #ffd700;
        }

        /* Kontrol ButonlarÄ± */
        .controls-3d {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }
        button {
            background: #e94560;
            color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;
        }
        button:hover { background: #ff2e63; }

        /* GÃ–LGE SÄ°MÃœLASYONU (2. BÃ¶lÃ¼m) */
        .shadow-lab {
            background-color: #e0e0e0;
            color: #222;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-top: 5px solid #444;
        }

        .flex-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            width: 100%;
            max-width: 1000px;
        }

        /* KuÅŸbakÄ±ÅŸÄ± GÃ¶rÃ¼nÃ¼m (DÃ¼nya DÃ¶nÃ¼yor) */
        .top-view {
            width: 300px;
            height: 300px;
            position: relative;
            background: #1a1a2e;
            border-radius: 50%;
            border: 2px solid #444;
        }
        
        /* Yerden GÃ¶rÃ¼nÃ¼m (GÃ¶lge) */
        .ground-view {
            width: 400px;
            height: 300px;
            position: relative;
            background: skyblue; /* GÃ¼ndÃ¼z rengi */
            border: 4px solid #333;
            border-radius: 10px;
            overflow: hidden;
            transition: background 0.5s;
        }

        /* GÃ¶lge Kontrolleri */
        .shadow-controls {
            width: 80%;
            margin-top: 20px;
            text-align: center;
        }
        input[type=range] { width: 100%; margin: 15px 0; cursor: pointer; }
        
        .info-box {
            background: #fff;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* 2D Animasyon CSS SÄ±nÄ±flarÄ± */
        .sun-fixed {
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #ffd700 40%, orange 100%);
            border-radius: 50%;
            box-shadow: 0 0 30px #ffd700;
            z-index: 10;
        }
        
        .earth-top {
            width: 100px;
            height: 100px;
            background: #2233ff;
            border-radius: 50%;
            position: absolute;
            top: 50%; left: 50%;
            margin-top: -50px; margin-left: -50px;
            /* DÃ¶nÃ¼ÅŸ animasyonu JS ile yapÄ±lacak */
        }
        .earth-top::after { /* Kuzey Kutbu NoktasÄ± */
            content: ''; position: absolute; top:45px; left:45px; width:10px; height:10px; background:white; border-radius:50%;
        }

        .stick-man-top {
            width: 10px; height: 10px; background: red; border-radius: 50%;
            position: absolute;
            top: -5px; left: 45px; /* DÃ¼nyanÄ±n kenarÄ±nda */
        }

        .sun-rays {
            position: absolute;
            right: 30px; top: 50%;
            width: 100px; height: 2px;
            background: rgba(255, 215, 0, 0.5);
            box-shadow: 0 0 10px yellow;
        }

        /* Yer GÃ¶rÃ¼nÃ¼mÃ¼ ElemanlarÄ± */
        .ground {
            position: absolute; bottom: 0; width: 100%; height: 40px; background: #4caf50;
        }
        .stick-figure {
            position: absolute; bottom: 40px; left: 50%; width: 10px; height: 60px; background: #333; transform: translateX(-50%);
        }
        .stick-head {
            position: absolute; top: -20px; left: -5px; width: 20px; height: 20px; background: #333; border-radius: 50%;
        }
        .shadow {
            position: absolute; bottom: 40px; left: 50%; 
            height: 5px; background: rgba(0,0,0,0.5);
            transform-origin: left center; /* GÃ¶lge ayaktan uzar */
            border-radius: 5px;
        }
        
        .compass {
            position: absolute; bottom: 5px; width: 100%; text-align: center; font-weight: bold; font-size: 0.8rem; color: white;
        }
        .compass span { margin: 0 40px; }

    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>

<header>
    <h1>ğŸŒ DÃ¼nya'nÄ±n Hareketleri SimÃ¼lasyonu</h1>
    <p>1. BÃ¶lÃ¼m: Dolanma (Mevsimler) | 2. BÃ¶lÃ¼m: DÃ¶nme (Gece-GÃ¼ndÃ¼z ve GÃ¶lge)</p>
</header>

<div id="canvas-container">
    <div class="controls-3d">
        <button onclick="toggleOrbit()">DolanmayÄ± Durdur/BaÅŸlat</button>
    </div>
    </div>

<div class="shadow-lab">
    <h2>â˜€ï¸ GÃ¶lge Boyu LaboratuvarÄ±</h2>
    <p style="max-width: 800px; text-align: center;">
        <b>Kural:</b> GÃ¼neÅŸ sabittir. DÃ¼nya kendi etrafÄ±nda dÃ¶ner. 
        Slider'Ä± kaydÄ±rarak DÃ¼nya'yÄ± dÃ¶ndÃ¼rÃ¼n ve gÃ¶lgenin nasÄ±l deÄŸiÅŸtiÄŸini izleyin.
        <br><span style="color: #e94560;">(SaÄŸ Taraf = DOÄU, Sol Taraf = BATI)</span>
    </p>

    <div class="flex-container">
        <div style="text-align: center;">
            <h4>Uzaydan BakÄ±ÅŸ (Kuzey Kutbu)</h4>
            <div class="top-view">
                <div class="sun-fixed"></div> <div class="sun-rays"></div>
                <div class="earth-top" id="earthTop">
                    <div class="stick-man-top"></div> <div style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); color:white; font-size:10px;">DÃœNYA</div>
                </div>
                <div style="position:absolute; bottom:10px; width:100%; text-align:center; color:gray;">â†©ï¸ DÃ¶nÃ¼ÅŸ YÃ¶nÃ¼</div>
            </div>
        </div>

        <div style="text-align: center;">
            <h4>Yerden GÃ¶rÃ¼nÃ¼m (Bizim GÃ¶zÃ¼mÃ¼zden)</h4>
            <div class="ground-view" id="groundScene">
                <div style="position:absolute; top:10px; right:10px; color:#ffd700; font-weight:bold;">â˜€ï¸ GÃœNEÅ (DOÄU)</div>
                
                <div class="stick-figure"><div class="stick-head"></div></div>
                
                <div class="shadow" id="shadowBox"></div>

                <div class="ground">
                    <div class="compass">
                        <span>BATI (Sol)</span> <span>DOÄU (SaÄŸ)</span>
                    </div>
                </div>
                
                <div id="skyStatus" style="position:absolute; top:40%; width:100%; text-align:center; font-size:1.5rem; font-weight:bold; color:rgba(255,255,255,0.8);">GECE</div>
            </div>
        </div>
    </div>

    <div class="shadow-controls">
        <div class="info-box" id="timeInfo">Saat: 00:00 (Gece)</div>
        <input type="range" id="rotationSlider" min="0" max="360" value="180" oninput="updateShadowSystem()">
        <p style="font-size: 0.9rem; color: #555;">Ã‡ubuÄŸu kaydÄ±rarak DÃ¼nya'yÄ± BatÄ±'dan DoÄŸu'ya dÃ¶ndÃ¼rÃ¼n.</p>
    </div>
</div>

<script>
    // ==========================================
    // BÃ–LÃœM 1: 3D THREE.JS (YÃ¶rÃ¼nge & Mevsimler)
    // ==========================================
    const container = document.getElementById('canvas-container');
    const scene = new THREE.Scene();
    
    // Kamera
    const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);
    camera.position.set(0, 40, 50);
    camera.lookAt(0, 0, 0);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(container.clientWidth, container.clientHeight);
    container.appendChild(renderer.domElement);

    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    // IÅŸÄ±klar
    const ambientLight = new THREE.AmbientLight(0x333333);
    scene.add(ambientLight);
    const pointLight = new THREE.PointLight(0xffffff, 2, 100);
    scene.add(pointLight);

    // 1. GÃœNEÅ (Merkezde)
    const sunGeo = new THREE.SphereGeometry(4, 32, 32);
    const sunMat = new THREE.MeshBasicMaterial({ color: 0xffd700 });
    const sun = new THREE.Mesh(sunGeo, sunMat);
    scene.add(sun);

    // 2. YÃ–RÃœNGE (Elips Ã‡izgisi)
    // x = a * cos(t), z = b * sin(t) -> a > b (Elips)
    const curve = new THREE.EllipseCurve(
        0, 0,            // ax, aY (merkez)
        25, 18,          // xRadius, yRadius (GeniÅŸlik ve Derinlik farkÄ± - ELÄ°PS)
        0, 2 * Math.PI,  // BaÅŸlangÄ±Ã§, BitiÅŸ aÃ§Ä±sÄ±
        false,           // Saat yÃ¶nÃ¼
        0                // DÃ¶nÃ¼ÅŸ
    );
    const points = curve.getPoints(100);
    const geometry = new THREE.BufferGeometry().setFromPoints(points);
    const material = new THREE.LineBasicMaterial({ color: 0xffffff, opacity: 0.3, transparent: true });
    const orbitEllipse = new THREE.Line(geometry, material);
    orbitEllipse.rotation.x = Math.PI / 2; // Yatay dÃ¼zleme yatÄ±r
    scene.add(orbitEllipse);

    // 3. DÃœNYA (Eksen EÄŸikliÄŸi ile)
    const earthGroup = new THREE.Group(); // YÃ¶rÃ¼nge hareketi iÃ§in grup
    scene.add(earthGroup);

    const earthGeo = new THREE.SphereGeometry(1.5, 32, 32);
    const earthMat = new THREE.MeshPhongMaterial({ 
        color: 0x2233ff, emissive: 0x112244, specular: 0x111111, shininess: 10 
    });
    const earth = new THREE.Mesh(earthGeo, earthMat);
    // Eksen EÄŸikliÄŸi (23.5 derece) - Z ekseninde eÄŸiyoruz
    earth.rotation.z = 23.5 * (Math.PI / 180);
    
    // DÃ¼nyanÄ±n Ã¼zerine Ã§izgi (Ekvator vb.)
    const axisGeo = new THREE.CylinderGeometry(0.05, 0.05, 4, 8);
    const axisMat = new THREE.MeshBasicMaterial({ color: 0xff0000 });
    const axisLine = new THREE.Mesh(axisGeo, axisMat);
    axisLine.rotation.z = 23.5 * (Math.PI / 180); // AynÄ± eÄŸiklik
    earth.add(axisLine);
    
    scene.add(earth); // Earth'Ã¼ doÄŸrudan sahneye ekleyip pozisyonunu frame'de gÃ¼ncelleyeceÄŸiz

    // ETÄ°KETLERÄ° OLUÅTURMA FONKSÄ°YONU
    function createLabel(text, x, z, isSeason) {
        const div = document.createElement('div');
        div.className = isSeason ? 'label season-label' : 'label';
        div.textContent = text;
        div.style.top = '0px';
        div.style.left = '0px';
        container.appendChild(div);
        return { element: div, position: new THREE.Vector3(x, 0, z) };
    }

    // Mevsim ve Ay KonumlarÄ± (Elipsin aÃ§Ä±larÄ±na gÃ¶re - Three.js koordinat sistemi)
    // SaÄŸ: X+, Sol: X-, Ãœst: Z-, Alt: Z+
    // 21 Haziran (Yaz - Kuzey YarÄ±mkÃ¼re iÃ§in): GÃ¼neÅŸ Ä±ÅŸÄ±nlarÄ± dik gelir.
    // Elipsin saÄŸ tarafÄ±nda eksen gÃ¼neÅŸe dÃ¶nÃ¼k olsun.
    
    const labels = [
        createLabel("21 Haziran (YAZ)", 25, 0, true),
        createLabel("Haziran", 22, 5, false),
        
        createLabel("23 EylÃ¼l (SONBAHAR)", 0, 18, true),
        createLabel("EylÃ¼l", -5, 16, false),
        
        createLabel("21 AralÄ±k (KIÅ)", -25, 0, true),
        createLabel("AralÄ±k", -22, -5, false),
        
        createLabel("21 Mart (Ä°LKBAHAR)", 0, -18, true),
        createLabel("Mart", 5, -16, false)
    ];

    // ANÄ°MASYON DÃ–NGÃœSÃœ
    let orbitAngle = 0;
    let isOrbiting = true;

    function animate() {
        requestAnimationFrame(animate);

        if (isOrbiting) {
            orbitAngle += 0.005;
            if(orbitAngle > Math.PI * 2) orbitAngle = 0;
        }

        // Eliptik Hareket MatematiÄŸi
        // x = 25 * cos(angle), z = 18 * sin(angle)
        earth.position.x = 25 * Math.cos(orbitAngle);
        earth.position.z = 18 * Math.sin(orbitAngle);

        // Kendi etrafÄ±nda dÃ¶nme
        earth.rotation.y += 0.05;

        controls.update();
        renderer.render(scene, camera);

        // Etiketlerin Ekrandaki Yerini GÃ¼ncelleme
        labels.forEach(lbl => {
            const screenPos = lbl.position.clone();
            screenPos.project(camera);
            
            const x = (screenPos.x * .5 + .5) * container.clientWidth;
            const y = (-(screenPos.y * .5) + .5) * container.clientHeight;

            lbl.element.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px)`;
        });
    }
    animate();
    
    function toggleOrbit() { isOrbiting = !isOrbiting; }
    window.addEventListener('resize', () => {
        camera.aspect = container.clientWidth / container.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(container.clientWidth, container.clientHeight);
    });

    // ==========================================
    // BÃ–LÃœM 2: GÃ–LGE LABORATUVARI (DOM / JS)
    // ==========================================
    
    function updateShadowSystem() {
        const sliderVal = parseInt(document.getElementById('rotationSlider').value);
        // Slider 0 -> 360 derece.
        // 0 Derece: Gece yarÄ±sÄ± (GÃ¼neÅŸ'in tam tersi)
        // 90 Derece: Sabah (GÃ¼neÅŸ doÄŸuyor)
        // 180 Derece: Ã–ÄŸle (GÃ¼neÅŸ tam tepede/karÅŸÄ±da)
        // 270 Derece: AkÅŸam (GÃ¼neÅŸ batÄ±yor)
        // 360 Derece: Gece yarÄ±sÄ±
        
        // 1. TOP VIEW (DÃœNYA DÃ–NÃœYOR)
        const earthDiv = document.getElementById('earthTop');
        // DÃ¼nyayÄ± dÃ¶ndÃ¼r.
        // Not: DÃ¼nya saat yÃ¶nÃ¼nÃ¼n tersine dÃ¶ner.
        // Slider arttÄ±kÃ§a (zaman ilerledikÃ§e) aÃ§Ä± artmalÄ±.
        earthDiv.style.transform = `rotate(${-sliderVal}deg)`;

        // 2. GROUND VIEW (GÃ–LGE HESABI)
        const shadowBox = document.getElementById('shadowBox');
        const skyStatus = document.getElementById('skyStatus');
        const groundScene = document.getElementById('groundScene');
        const timeInfo = document.getElementById('timeInfo');
        
        // Saat HesabÄ± (Basit orantÄ±)
        // 0 = 00:00, 180 = 12:00
        let hour = Math.floor((sliderVal / 360) * 24);
        let minute = Math.floor(((sliderVal / 360) * 24 * 60) % 60);
        timeInfo.innerText = `Saat: ${hour.toString().padStart(2,'0')}:${minute.toString().padStart(2,'0')}`;

        // GÃ¼ndÃ¼z mÃ¼ Gece mi?
        // GÃ¼neÅŸ SaÄŸda (DoÄŸu).
        // DÃ¶nÃ¼ÅŸ sÄ±rasÄ±nda aÃ§Ä± 90 ile 270 arasÄ±ndaysa GÃ¼neÅŸ'i gÃ¶rÃ¼rÃ¼z.
        // 90 (Sabah 06:00) - 270 (AkÅŸam 18:00) arasÄ± gÃ¼ndÃ¼z.
        
        if (sliderVal >= 80 && sliderVal <= 280) {
            // --- GÃœNDÃœZ ---
            groundScene.style.backgroundColor = "#87CEEB"; // AÃ§Ä±k Mavi
            skyStatus.innerText = "";
            shadowBox.style.opacity = "1";
            
            // GÃ¶lge HesabÄ±
            // Ã–ÄŸle vakti (180) gÃ¶lge en kÄ±sa (veya 0).
            // 90'da (Sabah) gÃ¶lge BatÄ±'ya (Sola) dÃ¼ÅŸer.
            // 270'de (AkÅŸam) gÃ¶lge DoÄŸu'ya (SaÄŸa) dÃ¼ÅŸer.
            
            // Merkezden uzaklÄ±k (180 merkez)
            let dist = sliderVal - 180; // -90 (sabah) ile +90 (akÅŸam) arasÄ±
            
            // GÃ¶lge YÃ¶nÃ¼ ve UzunluÄŸu
            // Sabah (dist negatif): GÃ¼neÅŸ doÄŸuda, gÃ¶lge batÄ±ya (sola).
            // CSS'de sol iÃ§in transform negatif, saÄŸ iÃ§in pozitif kullanabiliriz ama
            // burada gÃ¶lgeyi "left: 50%" noktasÄ±ndan uzatÄ±yoruz.
            
            // Matematik:
            // Sabah (80-170): GÃ¶lge BatÄ±'ya (Sola) uzamalÄ±.
            // Ã–ÄŸle (170-190): GÃ¶lge Ã§ok kÄ±sa.
            // AkÅŸam (190-280): GÃ¶lge DoÄŸu'ya (SaÄŸa) uzamalÄ±.
            
            let shadowLength = dist * 2; // KatsayÄ± ile gÃ¶lgeyi uzat
            
            // GÃ¼neÅŸ DoÄŸu'da (SaÄŸda).
            // Sabah: GÃ¼neÅŸ saÄŸda, gÃ¶lge SOLA dÃ¼ÅŸer.
            // dist (-90) -> shadowLength (-180). Negatif deÄŸer SOLA gitmeli.
            
            if (shadowLength < 0) {
                // GÃ¶lge Sola (BatÄ±)
                shadowBox.style.width = `${Math.abs(shadowLength)}px`;
                shadowBox.style.transform = "translateX(-100%)"; // Sola yasla
                timeInfo.innerHTML += " <br> (Sabah - GÃ¶lge BatÄ±'ya)";
            } else {
                // GÃ¶lge SaÄŸa (DoÄŸu)
                shadowBox.style.width = `${Math.abs(shadowLength)}px`;
                shadowBox.style.transform = "translateX(0)"; // SaÄŸa uzasÄ±n
                timeInfo.innerHTML += " <br> (Ã–ÄŸleden Sonra - GÃ¶lge DoÄŸu'ya)";
            }

        } else {
            // --- GECE ---
            groundScene.style.backgroundColor = "#0f172a"; // Koyu Lacivert
            skyStatus.innerText = "ğŸŒ‘ GECE";
            shadowBox.style.opacity = "0"; // Gece gÃ¶lge yok
            timeInfo.innerHTML += " <br> (GÃ¼neÅŸ Yok)";
        }
    }

    // BaÅŸlangÄ±Ã§ta Ã§alÄ±ÅŸtÄ±r
    updateShadowSystem();

</script>
</body>
</html>
