<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DÃ¼nya, GÃ¼neÅŸ ve GÃ¶lgeler - 4. SÄ±nÄ±f</title>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a2e;
            color: white;
            overflow-x: hidden;
        }

        /* Ãœst BaÅŸlÄ±k */
        header {
            background: linear-gradient(90deg, #16213e 0%, #0f3460 100%);
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            position: relative;
            z-index: 10;
        }
        h1 { margin: 0; font-size: 1.8rem; color: #ffd700; }
        p { margin: 5px 0 0; opacity: 0.8; font-size: 0.9rem; }

        /* 3D Sahne AlanÄ± */
        #canvas-container {
            width: 100%;
            height: 50vh;
            position: relative;
            background: #000;
        }
        #overlay-info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.8rem;
            pointer-events: none;
        }

        /* Kontrol Paneli */
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 10px;
            background: #16213e;
        }
        button {
            background: #e94560;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        button:hover { background: #ff2e63; }

        /* GÃ¶lge SimÃ¼lasyonu BÃ¶lÃ¼mÃ¼ */
        .shadow-section {
            background-color: #f0f0f0; /* GÃ¼ndÃ¼z rengi */
            color: #333;
            padding: 30px 20px;
            text-align: center;
            transition: background 0.5s;
        }
        .shadow-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        /* GÃ¶lge GÃ¶rseli */
        .scene-2d {
            height: 200px;
            border-bottom: 4px solid #4caf50;
            position: relative;
            margin-top: 40px;
            overflow: hidden;
        }
        
        .sun-2d {
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, #ffd700 40%, #ffa500 100%);
            border-radius: 50%;
            position: absolute;
            bottom: 10px; /* BaÅŸlangÄ±Ã§ */
            left: 0;
            box-shadow: 0 0 20px #ffd700;
            transition: bottom 0.1s, left 0.1s;
        }

        .stick-figure {
            width: 10px;
            height: 80px;
            background: #333;
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2;
        }
        .stick-head {
            width: 20px;
            height: 20px;
            background: #333;
            border-radius: 50%;
            position: absolute;
            top: -20px;
            left: -5px;
        }

        .shadow {
            height: 4px;
            background: rgba(0,0,0,0.4);
            position: absolute;
            bottom: 0;
            left: 50%;
            transform-origin: left center; /* GÃ¶lge merkezden uzar */
            width: 0px;
            border-radius: 2px;
        }

        /* Bilgi KartlarÄ± Grid */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #1a1a2e;
        }
        .card {
            background: #0f3460;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #e94560;
        }
        .card h3 { color: #ffd700; margin-top: 0; }
        
        /* Range Slider Ã–zelleÅŸtirme */
        input[type=range] {
            width: 80%;
            margin: 20px 0;
        }
        .time-label { font-size: 1.2rem; font-weight: bold; color: #e94560; }

    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>

<header>
    <h1>ğŸŒ DÃ¼nya, GÃ¼neÅŸ ve GÃ¶lgeler â˜€ï¸</h1>
    <p>4. SÄ±nÄ±f Fen Bilimleri - Ä°nteraktif Ã–ÄŸrenme AracÄ±</p>
</header>

<div id="canvas-container">
    <div id="overlay-info">
        ğŸ”µ <b>Mavi KÃ¼re:</b> DÃ¼nya<br>
        â˜€ï¸ <b>SarÄ± KÃ¼re:</b> GÃ¼neÅŸ<br>
        ğŸ–±ï¸ <b>Mouse:</b> YakÄ±nlaÅŸ/UzaklaÅŸ
    </div>
</div>
<div class="controls">
    <button onclick="toggleRotation()">DÃ¶nmeyi Durdur/BaÅŸlat</button>
    <button onclick="resetCamera()">KamerayÄ± SÄ±fÄ±rla</button>
</div>

<div class="shadow-section">
    <h2>ğŸ“ GÃ¶lge Boyu LaboratuvarÄ±</h2>
    <p>GÃ¼neÅŸi hareket ettirerek gÃ¶lgenin nasÄ±l deÄŸiÅŸtiÄŸini gÃ¶zlemleyin.</p>
    
    <div class="shadow-container">
        <div class="time-label" id="timeDisplay">Saat: 06:00 (Sabah)</div>
        <input type="range" id="sunSlider" min="0" max="100" value="0" oninput="updateShadow()">
        
        <div class="scene-2d">
            <div class="sun-2d" id="sun2d"></div>
            <div class="stick-figure"><div class="stick-head"></div></div>
            <div class="shadow" id="shadowBox"></div>
            
            <span style="position:absolute; bottom:5px; left:10px; font-weight:bold;">DOÄU (Van)</span>
            <span style="position:absolute; bottom:5px; right:10px; font-weight:bold;">BATI (Ä°zmir)</span>
        </div>
        
        <p id="shadow-explanation" style="margin-top:20px; font-weight:bold; color:#0f3460;">
            GÃ¼neÅŸ doÄŸudan doÄŸarken gÃ¶lge batÄ±ya dÃ¼ÅŸer ve Ã§ok uzundur.
        </p>
    </div>
</div>

<div class="info-grid">
    <div class="card">
        <h3>1. DÃ¶nme Hareketi (Gece-GÃ¼ndÃ¼z)</h3>
        <p>DÃ¼nya kendi etrafÄ±nda bir topaÃ§ gibi dÃ¶ner. Bu hareket <b>24 saat</b> sÃ¼rer. GÃ¼neÅŸ'i gÃ¶ren taraf GÃ¼ndÃ¼z, gÃ¶rmeyen taraf Gece olur.</p>
    </div>
    <div class="card">
        <h3>2. Dolanma Hareketi (YÄ±l)</h3>
        <p>DÃ¼nya, GÃ¼neÅŸ'in etrafÄ±nda elips ÅŸeklinde bir yolda dolanÄ±r. Bu hareket <b>365 gÃ¼n 6 saat</b> sÃ¼rer ve <b>Mevsimler</b> oluÅŸur.</p>
    </div>
    <div class="card">
        <h3>3. Ãœlkemizde GÃ¼neÅŸ</h3>
        <p>DÃ¼nya batÄ±dan doÄŸuya doÄŸru dÃ¶ndÃ¼ÄŸÃ¼ iÃ§in, Ã¼lkemizin doÄŸusundaki iller (Ã¶rneÄŸin IÄŸdÄ±r, Van) gÃ¼neÅŸi, batÄ±daki illerden (Ä°zmir, Ä°stanbul) daha Ã¶nce gÃ¶rÃ¼r.</p>
    </div>
</div>

<script>
    // --- BÃ–LÃœM 1: 3D THREE.JS KODLARI ---
    const container = document.getElementById('canvas-container');
    
    // Sahne Kurulumu
    const scene = new THREE.Scene();
    // YÄ±ldÄ±z efekti iÃ§in basit partikÃ¼ller eklenebilir ama ÅŸimdilik siyah yeterli
    
    // Kamera
    const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);
    camera.position.set(0, 20, 40);

    // Renderer
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(container.clientWidth, container.clientHeight);
    container.appendChild(renderer.domElement);

    // Kontroller (Mouse ile gezme)
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    // IÅŸÄ±k (GÃ¼neÅŸ IÅŸÄ±ÄŸÄ±)
    const pointLight = new THREE.PointLight(0xffffff, 1.5, 100);
    pointLight.position.set(0, 0, 0);
    scene.add(pointLight);
    
    const ambientLight = new THREE.AmbientLight(0x333333); // AzÄ±cÄ±k ortam Ä±ÅŸÄ±ÄŸÄ±
    scene.add(ambientLight);

    // NESNELER
    // 1. GÃ¼neÅŸ
    const sunGeometry = new THREE.SphereGeometry(4, 32, 32);
    const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xffd700 }); // IÅŸÄ±k yaysa da kendisi parlasÄ±n
    const sun = new THREE.Mesh(sunGeometry, sunMaterial);
    scene.add(sun);

    // 2. DÃ¼nya Grubu (Dolanma hareketi iÃ§in pivot)
    const earthOrbitGroup = new THREE.Group();
    scene.add(earthOrbitGroup);

    // 3. DÃ¼nya
    const earthGeometry = new THREE.SphereGeometry(1.5, 32, 32);
    const earthMaterial = new THREE.MeshPhongMaterial({ 
        color: 0x2233ff, 
        emissive: 0x112244,
        specular: 0x111111,
        shininess: 10
    }); 
    const earth = new THREE.Mesh(earthGeometry, earthMaterial);
    earth.position.set(15, 0, 0); // GÃ¼neÅŸten uzaklÄ±k
    
    // DÃ¼nyaya basit bir "TÃ¼rkiye" noktasÄ± ekleyelim (KÄ±rmÄ±zÄ± kÃ¼Ã§Ã¼k kutu)
    const trMarkerGeo = new THREE.BoxGeometry(0.2, 0.2, 0.2);
    const trMarkerMat = new THREE.MeshBasicMaterial({ color: 0xff0000 });
    const turkey = new THREE.Mesh(trMarkerGeo, trMarkerMat);
    turkey.position.set(1.4, 0.5, 0); // DÃ¼nyanÄ±n yÃ¼zeyinde bir yer
    earth.add(turkey);

    // DÃ¼nyayÄ± eksen eÄŸikliÄŸi ile eÄŸelim (23 derece)
    earth.rotation.z = 23.5 * (Math.PI / 180);

    earthOrbitGroup.add(earth);

    // YÃ¶rÃ¼nge Ã‡izgisi (GÃ¶rsel referans)
    const orbitGeometry = new THREE.RingGeometry(14.8, 15.2, 64);
    const orbitMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide, opacity: 0.1, transparent: true });
    const orbitLine = new THREE.Mesh(orbitGeometry, orbitMaterial);
    orbitLine.rotation.x = Math.PI / 2;
    scene.add(orbitLine);

    // Animasyon DeÄŸiÅŸkenleri
    let isRotating = true;

    function animate() {
        requestAnimationFrame(animate);

        if(isRotating) {
            // Kendi ekseninde dÃ¶nme (GÃ¼n)
            earth.rotation.y += 0.02; 
            
            // GÃ¼neÅŸ etrafÄ±nda dolanma (YÄ±l)
            earthOrbitGroup.rotation.y += 0.005; 
        }

        controls.update();
        renderer.render(scene, camera);
    }
    animate();

    // Fonksiyonlar
    function toggleRotation() { isRotating = !isRotating; }
    function resetCamera() { 
        camera.position.set(0, 20, 40); 
        controls.reset();
    }

    // Pencere boyutu deÄŸiÅŸirse
    window.addEventListener('resize', () => {
        camera.aspect = container.clientWidth / container.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(container.clientWidth, container.clientHeight);
    });


    // --- BÃ–LÃœM 2: GÃ–LGE SÄ°MÃœLASYONU MANTIÄI ---
    function updateShadow() {
        const val = document.getElementById('sunSlider').value;
        const sunElem = document.getElementById('sun2d');
        const shadowElem = document.getElementById('shadowBox');
        const timeLabel = document.getElementById('timeDisplay');
        const explainText = document.getElementById('shadow-explanation');
        
        // Slider 0 - 100 arasÄ±
        // 0 = Sabah (DoÄŸu/Sol), 50 = Ã–ÄŸle (Tepe), 100 = AkÅŸam (BatÄ±/SaÄŸ)
        
        // GÃ¼neÅŸin Hareketi (YarÄ±m daire rotasÄ±)
        // X pozisyonu: %0 dan %100'e
        // Y pozisyonu: SinÃ¼s dalgasÄ± (Kenarlarda 10px, ortada 150px)
        
        const sunX = val; // YÃ¼zde olarak
        // SinÃ¼s formÃ¼lÃ¼: 0'da 0, 50'de 1, 100'de 0 verir.
        // Math.sin( radyan ) -> 0 ile PI arasÄ±
        const radians = (val / 100) * Math.PI;
        const sunY = Math.sin(radians) * 140 + 10; // YÃ¼kseklik hesaplama
        
        sunElem.style.left = `calc(${sunX}% - 25px)`;
        sunElem.style.bottom = `${sunY}px`;
        
        // Saat Hesaplama (Temsili)
        // 0 -> 06:00, 50 -> 12:00, 100 -> 18:00
        const totalMinutes = 6 * 60 + (val / 100) * (12 * 60);
        const hours = Math.floor(totalMinutes / 60);
        const minutes = Math.floor(totalMinutes % 60);
        const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
        
        let period = "";
        if (val < 30) period = "(Sabah)";
        else if (val > 70) period = "(AkÅŸamÃœstÃ¼)";
        else period = "(Ã–ÄŸle)";
        
        timeLabel.innerText = `Saat: ${timeString} ${period}`;

        // GÃ¶lge Hesaplama
        // IÅŸÄ±k kaynaÄŸÄ±na gÃ¶re ters yÃ¶ne dÃ¼ÅŸmeli
        const center = 50;
        const distFromCenter = val - center; // -50 (sol) ile +50 (saÄŸ) arasÄ±
        
        // GÃ¶lge boyu: GÃ¼neÅŸ tepedeyken (dist=0) gÃ¶lge kÄ±sa, kenardayken uzun.
        // Basit mantÄ±k: GÃ¶lge boyu merkeze uzaklÄ±kla artar.
        let shadowLength = distFromCenter * -4; // Eksi ile Ã§arpÄ±yoruz Ã§Ã¼nkÃ¼ gÃ¼neÅŸ soldaysa gÃ¶lge saÄŸa dÃ¼ÅŸer
        
        // GÃ¶lgenin CSS transformu
        // EÄŸer shadowLength pozitifse (GÃ¼neÅŸ solda/sabah) -> GÃ¶lge saÄŸa (scaleX pozitif)
        // EÄŸer shadowLength negatifse (GÃ¼neÅŸ saÄŸda/akÅŸam) -> GÃ¶lge sola (scaleX negatif)
        
        // GÃ¶lgeyi Ã§izelim
        // CSS'de width negatif olamaz, transform kullanacaÄŸÄ±z.
        // GÃ¶lge div'i ortada (left: 50%).
        
        shadowElem.style.width = `${Math.abs(shadowLength)}px`;
        
        if (shadowLength > 0) {
            // Sabah: GÃ¼neÅŸ solda, gÃ¶lge saÄŸa
            shadowElem.style.transform = "translateX(0)"; 
            shadowElem.style.backgroundColor = "rgba(0,0,0,0.4)"; // Normal gÃ¶lge
            explainText.innerText = "GÃ¼neÅŸ doÄŸudayken (sabah), gÃ¶lge batÄ±ya dÃ¼ÅŸer ve uzundur.";
        } else if (shadowLength < 0) {
             // AkÅŸam: GÃ¼neÅŸ saÄŸda, gÃ¶lge sola
             // Sola uzamasÄ± iÃ§in translateX(-100%) yapmamÄ±z lazÄ±m (geniÅŸliÄŸi kadar sola kaydÄ±r)
            shadowElem.style.transform = "translateX(-100%)";
            explainText.innerText = "GÃ¼neÅŸ batÄ±dayken (akÅŸam), gÃ¶lge doÄŸuya dÃ¼ÅŸer ve uzundur.";
        } else {
            // Tam Ã¶ÄŸle
            explainText.innerText = "Ã–ÄŸle vakti gÃ¼neÅŸ tam tepededir, gÃ¶lge en kÄ±sadÄ±r.";
        }
        
        // Arka plan rengi (Sabah/AkÅŸam turuncu, Ã–ÄŸle mavi)
        if (val < 20 || val > 80) {
            document.querySelector('.shadow-section').style.backgroundColor = "#ffeebb";
        } else {
            document.querySelector('.shadow-section').style.backgroundColor = "#e0f7fa";
        }

    }
    
    // BaÅŸlangÄ±Ã§ ayarÄ±
    updateShadow();
    
</script>

</body>
</html>
