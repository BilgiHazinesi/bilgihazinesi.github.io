<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dil Bilgisi Çalışmaları - Bilgi Hazinesi</title>
    
    <base href="https://bilgihazinesi.github.io/">

    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Crimson+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="stiller/stil.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>

    <style>
        /* Bu sayfaya özel stiller, ana temanıza uyumlu */
        body {
            font-family: 'Crimson Pro', serif;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
            padding: 20px;
        }
        header h1 a {
            font-family: 'Cinzel Decorative', cursive;
            color: var(--text-primary-color);
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-decoration: none;
        }
        header p {
            font-size: 1.1rem;
            margin-bottom: 30px;
            color: var(--text-secondary-color);
        }
        .tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }
        .tab-button {
            padding: 12px 25px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--papyrus-bg-color-dark);
            color: var(--text-secondary-color);
            font-size: 1rem;
            font-family: 'Crimson Pro', serif;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .tab-button.active, .tab-button:hover {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        .activity-content { display: none; }
        .activity-content.active { display: block; }
        
        /* Quiz Kartı Stili */
        .quiz-card {
            background-color: var(--papyrus-bg-color-dark);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-color);
            margin: 0 auto 20px auto;
            max-width: 600px;
        }
        .question { 
            font-size: 1.3rem; 
            margin-bottom: 20px; 
            line-height: 1.5;
            font-weight: 600;
        }
        .question strong {
            color: var(--accent-color);
            font-weight: 900;
        }

        /* YENİ: Alfabetik Sıralama Listesi Stilleri */
        .sortable-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            gap: 10px;
        }
        .sortable-list li {
            background-color: var(--papyrus-bg-color-dark);
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
            border-radius: 8px;
            padding: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: move; /* Sürükleme imleci */
            transition: all 0.2s ease;
        }
        /* Sürüklenirken gölge stil */
        .sortable-ghost {
            opacity: 0.4;
            background: var(--active-bg-color);
        }
        /* Seçilen öğe */
        .sortable-chosen {
            background: var(--papyrus-bg-color-light);
        }
        /* Kontrol sonrası sabitlenen (disabled) liste */
        .sortable-list:disabled li {
            cursor: not-allowed;
            opacity: 0.7;
        }


        /* Satır Sonu & Hecelere Ayırma Stilleri */
        .options { 
            display: grid; 
            grid-template-columns: 1fr; /* Mobilde her zaman tek sütun */
            gap: 10px; 
            margin-top: 15px; 
        }
        .option-btn {
            width: 100%;
            background-color: var(--papyrus-bg-color-dark);
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
            border-radius: 8px;
            padding: 12px;
            font-size: 1.1rem; /* Yazılar daha okunaklı */
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            line-height: 1.4;
            text-align: left; /* Cümleler için sola hizalı */
        }
        .option-btn strong {
             font-weight: 900;
             color: var(--text-primary-color);
        }
        .option-btn.correct strong { color: white; }
        .option-btn.wrong strong { color: white; }

        .option-btn:hover { background-color: var(--accent-color); color: white; }
        .option-btn:hover strong { color: white; }
        .option-btn.correct { background-color: #66bb6a; color: white; border-color: #66bb6a; }
        .option-btn.wrong { background-color: #ef5350; color: white; border-color: #ef5350; }
        .option-btn:disabled { cursor: not-allowed; opacity: 0.7; }

        #heceleme-input {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--border-color);
            background: var(--papyrus-bg-color-light);
            border-radius: 8px;
            font-size: 1.2rem;
            font-family: 'Crimson Pro', serif;
            text-align: center;
            box-sizing: border-box;
            font-weight: 700;
        }

        .quiz-buttons { margin-top: 20px; display: flex; justify-content: center; gap: 15px; }
        .quiz-btn { 
            padding: 10px 20px; 
            border: none; 
            border-radius: 8px; 
            font-size: 1rem; 
            font-family: 'Crimson Pro', serif; 
            font-weight: 600; 
            cursor: pointer; 
            transition: background 0.2s; 
        }
        .check-btn { background-color: var(--accent-color); color: white; }
        .next-btn { background-color: var(--text-secondary-color); color: white; }
        .feedback { font-weight: 700; margin-top: 15px; min-height: 24px; font-size: 1.1rem; }
        .correct { color: #2e7d32; }
        .wrong { color: #c62828; }
        
        @media (max-width: 768px) {
            header h1 a { font-size: 2rem; }
            header p { font-size: 1rem; }
            .tab-button { padding: 10px 15px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>

    <div id="menu-container"></div>

    <div class="container">
        <header>
            <h1><a href="https://bilgihazinesi.github.io/">Dil Bilgisi Çalışmaları</a></h1>
            <p>Kelimeleri doğru sıralayalım ve hecelerine ayıralım.</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="showActivity('alfabe')">Alfabetik Sıralama</button>
            <button class="tab-button" onclick="showActivity('heceleme')">Hecelere Ayırma</button>
            <button class="tab-button" onclick="showActivity('satirsonu')">Satır Sonu Ayırma</button>
        </div>

        <main>
            <div id="alfabe" class="activity-content active">
                <div class="quiz-card">
                    <p class="question" id="alfabe-question">Kelimeleri sürükleyerek alfabetik sıraya dizin.</p>
                    <p id="alfabe-level" class="feedback">Seviye: 1</p>
                    <ul id="sortable-list" class="sortable-list">
                        </ul>
                    <p class="feedback" id="alfabe-feedback"></p>
                    <div class="quiz-buttons">
                       <button id="alfabe-check-btn" class="quiz-btn check-btn" onclick="alphabetSort.checkAnswer()">Kontrol Et</button>
                       <button id="alfabe-next-btn" class="quiz-btn next-btn" onclick="alphabetSort.loadQuestion()" style="display: none;">Sonraki</button>
                    </div>
                </div>
            </div>

            <div id="heceleme" class="activity-content">
                <div class="quiz-card">
                    <p class="question" id="heceleme-question">"kelime" sözcüğünü hecelerine ayırın.</p>
                    <input type="text" id="heceleme-input" placeholder="Ör: ha-nı-me-li" autocomplete="off" autocapitalize="none">
                    <p class="feedback" id="heceleme-feedback"></p>
                     <div class="quiz-buttons">
                        <button class="quiz-btn check-btn" onclick="syllabify.checkAnswer()">Kontrol Et</button>
                        <button class="quiz-btn next-btn" onclick="syllabify.loadQuestion()">Sonraki</button>
                    </div>
                </div>
            </div>
            
            <div id="satirsonu" class="activity-content">
                 <div class="quiz-card">
                    <p class="question" id="satirsonu-question">Hangi cümlede satır sonu ayırımı <strong>doğru</strong> yapılmıştır?</p>
                    <div class="options" id="satirsonu-options">
                        </div>
                    <p class="feedback" id="satirsonu-feedback"></p>
                    <div class="quiz-buttons">
                       <button class="quiz-btn next-btn" onclick="lineBreak.loadQuestion()">Sonraki Soru</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- VERİ BANKALARI ---

        // Alfabetik Sıralama için kelime listesi
        const sortWordList = [
            "Elma", "Armut", "Kiraz", "Çilek", "Muz", "Portakal", "Karpuz", "Kavun",
            "Ayva", "Nar", "Kedi", "Köpek", "Kuş", "Balık", "At", "Aslan", "Kaplan", 
            "Zürafa", "Ev", "Okul", "Araba", "Masa", "Sandalye", "Kitap", "Defter", 
            "Kalem", "Güneş", "Ay", "Yıldız", "Bulut", "Yağmur", "Kar", "Rüzgar",
            "Çiçek", "Ağaç", "Toprak", "Su", "Hava", "Ateş", "Taş", "Dağ", "Deniz",
            "Nehir", "Göl", "Orman", "Çöl", "Ada", "Kıta", "Ülke", "Şehir", "Köy"
        ];

        // Hecelere Ayırma için kelime listesi
        const heceData = [
            { word: "hanımeli", hece: "ha-nı-me-li" },
            { word: "ilköğretim", hece: "il-köğ-re-tim" },
            { word: "başöğretmen", hece: "baş-öğ-ret-men" },
            { word: "Ankara", hece: "An-ka-ra" },
            { word: "karakter", hece: "ka-rak-ter" },
            { word: "otomobil", hece: "o-to-mo-bil" },
            { word: "bilgisayar", hece: "bil-gi-sa-yar" },
            { word: "matematik", hece: "ma-te-ma-tik" },
            { word: "kütüphane", hece: "kü-tüp-ha-ne" },
            { word: "cumhuriyet", hece: "cum-hu-ri-yet" },
            { word: "aslanağzı", hece: "as-lan-ağ-zı" },
            { word: "Türkiye", hece: "Tür-ki-ye" },
            { word: "program", hece: "prog-ram" },
            { word: "spor", hece: "spor" },
            { word: "tren", hece: "tren" },
            { word: "elektrik", hece: "e-lek-trik" },
            { word: "İstanbul", hece: "İs-tan-bul" },
            { word: "karnabahar", hece: "kar-na-ba-har" },
            { word: "televizyon", hece: "te-le-viz-yon" },
            { word: "ağaç", hece: "a-ğaç" }
        ];

        // YENİ: Satır Sonu Ayırma için cümle listesi
        const lineBreakData = [
            {
                correct: "Akşam bize <strong>arkada-</strong><br><strong>şımla</strong> geleceğim.",
                wrong: [
                    "Akşam bize <strong>ark-</strong><br><strong>adaşımla</strong> geleceğim.",
                    "Akşam bize <strong>arkadaşım-</strong><br><strong>la</strong> geleceğim."
                ],
                word: "arkadaşımla" // (ar-ka-da-şım-la)
            },
            {
                correct: "Pazardan <strong>karpu-</strong><br><strong>zumuzu</strong> aldık.",
                wrong: [
                    "Pazardan <strong>karpuz-</strong><br><strong>umuzu</strong> aldık.", // 'z' sonraki heceye ait
                    "Pazardan <strong>karp-</strong><br><strong>uzumuzu</strong> aldık."
                ],
                word: "karpuzumuzu" // (kar-pu-zu-mu-zu)
            },
            {
                correct: "Yeni <strong>il-</strong><br><strong>köğretim</strong> binası açıldı.",
                wrong: [
                    "Yeni <strong>ilk-</strong><br><strong>öğretim</strong> binası açıldı.", // 'k' sonraki heceye ait
                    "Yeni <strong>ilköğreti-</strong><br><strong>m</strong> binası açıldı." // Sonda tek harf
                ],
                word: "ilköğretim" // (il-köğ-re-tim)
            },
            {
                correct: "Markete gidip <strong>otomo-</strong><br><strong>bille</strong> döneceğim.",
                wrong: [
                    "Markete gidip <strong>o-</strong><br><strong>tomobille</strong> döneceğim.", // Başta tek harf
                    "Markete gidip <strong>otomob-</strong><br><strong>ille</strong> döneceğim." // Yanlış heceleme
                ],
                word: "otomobille" // (o-to-mo-bil-le)
            },
            {
                correct: "Bahçedeki <strong>hanıme-</strong><br><strong>li</strong> çok güzel kokuyor.",
                wrong: [
                    "Bahçedeki <strong>han-</strong><br><strong>ımeli</strong> çok güzel kokuyor.",
                    "Bahçedeki <strong>hanımel-</strong><br><strong>i</strong> çok güzel kokuyor." // Sonda tek harf
                ],
                word: "hanımeli" // (ha-nı-me-li)
            }
        ];


        // --- GENEL FONKSİYONLAR ---

        document.addEventListener('DOMContentLoaded', () => {
            alphabetSort.loadQuestion();
            syllabify.loadQuestion();
            lineBreak.loadQuestion();
        });
        
        // Sekme değiştirme fonksiyonu
        function showActivity(activityId) {
            document.querySelectorAll('.activity-content').forEach(el => el.classList.remove('active'));
            document.getElementById(activityId).classList.add('active');
            
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.tab-button[onclick="showActivity('${activityId}')"]`).classList.add('active');
            
            // Diğer sekmeye geçince soruları yenile (kaldıkları yerden devam etmesinler)
            if (activityId === 'alfabe') alphabetSort.loadQuestion();
            if (activityId === 'heceleme') syllabify.loadQuestion();
            if (activityId === 'satirsonu') lineBreak.loadQuestion();
        }
        
        // Dizi karıştırma fonksiyonu
        function shuffleArray(array) {
            let newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Türkçe'ye özel alfabetik sıralama
        const trCollator = new Intl.Collator('tr', { sensitivity: 'base' });

        // --- 1. ETKİNLİK: ALFABETİK SIRALAMA (YENİLENDİ) ---
        const alphabetSort = {
            correctOrder: [],
            level: 1,
            streak: 0,
            sortableInstance: null,
            
            loadQuestion: function() {
                // Seviyeye göre kelime sayısı
                // Seviye 1: 3, Seviye 2: 4, Seviye 3: 5, Seviye 4: 6
                const wordCount = Math.min(this.level + 2, 6); 
                
                document.getElementById('alfabe-level').textContent = `Seviye: ${this.level} (${wordCount} kelime)`;

                // 4 kelimelik bir grup seç
                const shuffledWords = shuffleArray(sortWordList);
                const wordGroup = shuffledWords.slice(0, wordCount);
                
                // Doğru sıralanmış halini kaydet
                this.correctOrder = [...wordGroup].sort(trCollator.compare);
                
                // Karışık listeyi oluştur (doğruyla aynı olmasın)
                let shuffledOrder = shuffleArray(wordGroup);
                while(shuffledOrder.join(',') === this.correctOrder.join(',')) {
                    shuffledOrder = shuffleArray(wordGroup);
                }

                const listContainer = document.getElementById('sortable-list');
                listContainer.innerHTML = '';
                
                // Listeyi DOM'a ekle
                shuffledOrder.forEach(word => {
                    const li = document.createElement('li');
                    li.textContent = word;
                    listContainer.appendChild(li);
                });

                // Önceki Sortable örneğini yok et (varsa)
                if (this.sortableInstance) {
                    this.sortableInstance.destroy();
                }

                // Sürükle-bırak özelliğini etkinleştir
                this.sortableInstance = new Sortable(listContainer, {
                    animation: 150,
                    ghostClass: 'sortable-ghost',
                    chosenClass: 'sortable-chosen',
                });

                // Butonları ve geri bildirimi sıfırla
                document.getElementById('alfabe-feedback').textContent = '';
                document.getElementById('alfabe-check-btn').style.display = 'inline-block';
                document.getElementById('alfabe-next-btn').style.display = 'none';
                listContainer.disabled = false;
            },

            checkAnswer: function() {
                const listContainer = document.getElementById('sortable-list');
                
                // Kullanıcının sıralamasını al
                const userOrder = Array.from(listContainer.children).map(li => li.textContent);
                
                const feedbackEl = document.getElementById('alfabe-feedback');
                
                // Kontrol et
                if (userOrder.join(',') === this.correctOrder.join(',')) {
                    this.streak++;
                    if (this.streak >= 2 && this.level < 4) { // 4. seviye maks
                        this.level++;
                        this.streak = 0;
                        feedbackEl.innerHTML = "Harika! <strong>Seviye atladın!</strong>";
                    } else {
                        feedbackEl.textContent = 'Tebrikler, doğru sıralama!';
                    }
                    feedbackEl.className = 'feedback correct';
                } else {
                    this.streak = 0; // Yanlış yapınca seriyi sıfırla
                    feedbackEl.innerHTML = `Maalesef yanlış.<br>Doğru sıralama: <strong>${this.correctOrder.join(', ')}</strong>`;
                    feedbackEl.className = 'feedback wrong';
                }

                // Kontrol sonrası sürüklemeyi kapat
                this.sortableInstance.option('disabled', true);
                listContainer.disabled = true;

                // Butonları ayarla
                document.getElementById('alfabe-check-btn').style.display = 'none';
                document.getElementById('alfabe-next-btn').style.display = 'inline-block';
            }
        };

        // --- 2. ETKİNLİK: HECELERE AYIRMA ---
        const syllabify = {
            currentWord: null,
            
            loadQuestion: function() {
                this.currentWord = heceData[Math.floor(Math.random() * heceData.length)];
                
                document.getElementById('heceleme-question').innerHTML = `<strong>"${this.currentWord.word}"</strong> sözcüğünü hecelerine ayırın.`;
                
                const inputEl = document.getElementById('heceleme-input');
                inputEl.value = '';
                inputEl.disabled = false;
                
                const feedbackEl = document.getElementById('heceleme-feedback');
                feedbackEl.textContent = '';
                feedbackEl.className = 'feedback';
            },
            
            checkAnswer: function() {
                const inputEl = document.getElementById('heceleme-input');
                const userAnswer = inputEl.value.trim().toLowerCase();
                const correctAnswer = this.currentWord.hece.toLowerCase();
                
                const feedbackEl = document.getElementById('heceleme-feedback');
                
                if (userAnswer === correctAnswer) {
                    feedbackEl.textContent = "Harika! Doğru bildin!";
                    feedbackEl.className = 'feedback correct';
                } else {
                    feedbackEl.innerHTML = `Tekrar dene! <br>Doğru cevap: <strong>${this.currentWord.hece}</strong>`;
                    feedbackEl.className = 'feedback wrong';
                }
                inputEl.disabled = true;
            }
        };

        // --- 3. ETKİNLİK: SATIR SONU AYIRMA (YENİLENDİ) ---
        const lineBreak = {
            currentData: null,
            
            loadQuestion: function() {
                this.currentData = lineBreakData[Math.floor(Math.random() * lineBreakData.length)];
                
                document.getElementById('satirsonu-question').innerHTML = `Aşağıdaki cümlelerin hangisinde <strong>"${this.currentData.word}"</strong> sözcüğünün satır sonu ayrımı <strong>doğru</strong> yapılmıştır?`;

                // Tüm seçenekleri birleştir (1 doğru, 2 yanlış)
                let options = [this.currentData.correct, ...this.currentData.wrong];
                let finalOptions = shuffleArray(options);

                const optionsContainer = document.getElementById('satirsonu-options');
                optionsContainer.innerHTML = '';
                
                finalOptions.forEach(optionHtml => {
                    const button = document.createElement('button');
                    button.classList.add('option-btn');
                    button.innerHTML = optionHtml; // HTML olarak ekle (strong, br)
                    button.onclick = () => this.checkAnswer(optionHtml, button);
                    optionsContainer.appendChild(button);
                });

                document.getElementById('satirsonu-feedback').textContent = '';
            },

            checkAnswer: function(selectedHtml, btn) {
                const feedbackEl = document.getElementById('satirsonu-feedback');
                const optionButtons = document.querySelectorAll('#satirsonu-options .option-btn');
                const correctAnswer = this.currentData.correct;

                optionButtons.forEach(button => {
                    button.disabled = true;
                    if (button.innerHTML === correctAnswer) {
                        button.classList.add('correct');
                    }
                });

                if (selectedHtml === correctAnswer) {
                    feedbackEl.textContent = 'Tebrikler, doğru ayırım!';
                    feedbackEl.className = 'feedback correct';
                } else {
                    btn.classList.add('wrong');
                    feedbackEl.textContent = 'Maalesef yanlış, doğru cevap işaretlendi.';
                    feedbackEl.className = 'feedback wrong';
                }
            }
        };

    </script>

    <script src="bilesenler/menu.js"></script>

</body>
</html>
