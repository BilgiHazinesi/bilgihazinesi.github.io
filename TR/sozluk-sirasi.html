<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SÄ±ralama UstasÄ±</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #f4f7fc;
            --card-bg: #ffffff;
            --primary: #6a6ff2;
            --secondary: #f5a623;
            --correct: #2ecc71;
            --incorrect: #e74c3c;
            --text: #34495e;
            --border: #e0e5f0;
            --shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }
        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            padding: 1.5rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .game-container {
            width: 100%;
            max-width: 500px;
            background-color: var(--card-bg);
            border-radius: 1.5rem;
            padding: 2rem;
            box-shadow: var(--shadow);
            text-align: center;
        }
        header h1 {
            font-family: 'Baloo 2', sans-serif;
            color: var(--primary);
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }
        #level-title {
            font-family: 'Baloo 2', sans-serif;
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }
        #instructions {
            font-size: 1rem;
            margin-bottom: 2rem;
        }
        #word-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .word-item {
            font-family: 'Baloo 2', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            padding: 1rem;
            background-color: #fafbff;
            border: 2px solid var(--border);
            border-radius: 1rem;
            cursor: grab;
            transition: all 0.2s ease;
        }
        .word-item.dragging {
            opacity: 0.5;
            background-color: #e0e7ff;
            transform: scale(1.05);
        }
        .word-item.over {
            border-color: var(--primary);
            background-color: #f0f2ff;
        }
        #check-button {
            font-family: 'Baloo 2', sans-serif;
            font-size: 1.5rem;
            font-weight: 800;
            color: white;
            background-color: var(--primary);
            border: none;
            padding: 0.8rem 2rem;
            width: 100%;
            border-radius: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
            box-shadow: 0 5px 0 0 #4a4e9f;
        }
        #check-button:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 0 #4a4e9f;
        }
        #feedback-message {
            font-size: 1.2rem;
            font-weight: 700;
            margin-top: 1.5rem;
            height: 30px;
        }
        .correct { color: var(--correct); }
        .incorrect { color: var(--incorrect); }

        /* Kazanan EkranÄ± */
        #win-screen {
            display: none;
            text-align: center;
        }
        #win-screen h2 {
            font-family: 'Baloo 2', sans-serif;
            font-size: 2.5rem;
            color: var(--correct);
        }
        #win-screen p { font-size: 1.2rem; margin-bottom: 2rem; }
        #restart-button {
            font-family: 'Baloo 2', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
            background-color: var(--secondary);
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 1rem;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="game-container">
        
        <div id="game-active">
            <header>
                <h1>SÄ±ralama UstasÄ±</h1>
                <h2 id="level-title">Seviye 1</h2>
            </header>
            <p id="instructions">Kelimeleri alfabetik sÄ±raya koymak iÃ§in&nbsp;sÃ¼rÃ¼kleyip bÄ±rakÄ±n.</p>
            
            <div id="word-list">
                </div>

            <button id="check-button">Kontrol Et</button>
            <div id="feedback-message"></div>
        </div>

        <div id="win-screen">
            <h2>Tebrikler!</h2>
            <p>TÃ¼m seviyeleri baÅŸarÄ±yla tamamladÄ±nÄ±z. Sen&nbsp;bir SÄ±ralama UstasÄ±sÄ±n!</p>
            <button id="restart-button">Yeniden BaÅŸla</button>
        </div>

    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- 1. SÃ–ZCÃœK HAVUZU ve SORU BANKASI ---
    // KurallarÄ±nÄ±za gÃ¶re yapÄ±landÄ±rÄ±lmÄ±ÅŸ 52 kelimelik havuz.
    const soruBankasi = [
        // Seviye 1: Ä°lk harfler farklÄ± (2 soru seti)
        { level: 1, words: ["Armut", "Ceviz", "Elma", "FÄ±ndÄ±k"] },
        { level: 1, words: ["Bardak", "Domates", "Gemi", "HavuÃ§"] },
        
        // Seviye 2: Ä°lk harf aynÄ±, 2. harf farklÄ± (3 soru seti)
        { level: 2, words: ["Kale", "Kedi", "Kilo", "Kutu"] },
        { level: 2, words: ["SalÄ±", "Sema", "SÄ±ra", "Soru"] },
        { level: 2, words: ["Bale", "Birey", "Boru", "BÃ¼yÃ¼"] },

        // Seviye 3: Ä°lk 2 harf aynÄ±, 3. harf farklÄ± (3 soru seti)
        { level: 3, words: ["Kasa", "Kaya", "Kaba", "Kafa"] },
        { level: 3, words: ["Masa", "Mavi", "MayÄ±s", "MarÅŸ"] },
        { level: 3, words: ["Dede", "Defo", "Deri", "Deva"] },

        // Seviye 4: Ä°lk 3 harf aynÄ±, 4. harf farklÄ± (3 soru seti)
        { level: 4, words: ["Kare", "Kars", "Kart", "Kargo"] },
        { level: 4, words: ["Mandal", "Mantar", "Manav", "Mani"] },
        { level: 4, words: ["Kalem", "Kalp", "Kalan", "Kalkan"] },

        // Seviye 5: Ä°lk 4 harf aynÄ±, 5. harf farklÄ± (2 soru seti)
        // (Kural: "en fazla baÅŸtaki ilk 4 harf aynÄ± olabilir" -> yani 5. harfi karÅŸÄ±laÅŸtÄ±r)
        { level: 5, words: ["Karakol", "Karanfil", "Karar", "KarataÅŸ"] },
        { level: 5, words: ["Mandarin", "Mandalina", "MandacÄ±", "MandallÄ±"] }
    ];
    
    const seviyeBasliklari = [
        "Seviye 1: Ä°lk Harflere GÃ¶re SÄ±rala",
        "Seviye 2: Ä°kinci Harflere GÃ¶re SÄ±rala",
        "Seviye 3: ÃœÃ§Ã¼ncÃ¼ Harflere GÃ¶re SÄ±rala",
        "Seviye 4: DÃ¶rdÃ¼ncÃ¼ Harflere GÃ¶re SÄ±rala",
        "Seviye 5: BeÅŸinci Harflere GÃ¶re SÄ±rala"
    ];
    const maxSeviye = 5;

    // --- 2. OYUN DEÄžÄ°ÅžKENLERÄ° ---
    let mevcutSeviye = 1;
    let dogruSira = [];
    let suruklenenOge = null;

    // --- 3. DOM ELEMENTLERÄ° ---
    const wordList = document.getElementById('word-list');
    const levelTitle = document.getElementById('level-title');
    const checkButton = document.getElementById('check-button');
    const feedbackMessage = document.getElementById('feedback-message');
    const gameActiveDiv = document.getElementById('game-active');
    const winScreenDiv = document.getElementById('win-screen');
    const restartButton = document.getElementById('restart-button');

    // --- 4. TEMEL FONKSÄ°YONLAR ---

    // Fisher-Yates (Knuth) Shuffle
    function shuffle(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex != 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    function soruGetir(seviye) {
        // 1. O seviyeye ait sorularÄ± filtrele
        const seviyeSorulari = soruBankasi.filter(soru => soru.level === seviye);
        
        // 2. Rastgele bir soru seti seÃ§
        const secilenSoru = seviyeSorulari[Math.floor(Math.random() * seviyeSorulari.length)];

        // 3. DoÄŸru sÄ±rayÄ± kaydet (TÃ¼rkÃ§e karakterlere duyarlÄ± sÄ±ralama)
        dogruSira = [...secilenSoru.words].sort((a, b) => a.localeCompare(b, 'tr'));

        // 4. Kelimeleri karÄ±ÅŸtÄ±r
        let karisikKelimeler = shuffle([...dogruSira]);

        // 5. Ekrana yerleÅŸtir
        kelimeleriGoster(karisikKelimeler);

        // 6. BaÅŸlÄ±ÄŸÄ± gÃ¼ncelle
        levelTitle.textContent = seviyeBasliklari[seviye - 1];
        feedbackMessage.textContent = "";
    }

    function kelimeleriGoster(kelimeler) {
        wordList.innerHTML = ""; // Listeyi temizle
        kelimeler.forEach(kelime => {
            const item = document.createElement('div');
            item.classList.add('word-item');
            item.setAttribute('draggable', true);
            item.textContent = kelime;
            wordList.appendChild(item);
        });
        dragDropOlaylariniEkle();
    }

    function kontolEt() {
        // 1. Mevcut sÄ±rayÄ± al
        const mevcutSiraOge = wordList.querySelectorAll('.word-item');
        const mevcutKullaniciSirasi = Array.from(mevcutSiraOge).map(item => item.textContent);

        // 2. DoÄŸru sÄ±ra ile karÅŸÄ±laÅŸtÄ±r
        let hepsiDogru = true;
        for (let i = 0; i < dogruSira.length; i++) {
            if (dogruSira[i] !== mevcutKullaniciSirasi[i]) {
                hepsiDogru = false;
                break;
            }
        }

        // 3. Geri bildirim ver
        if (hepsiDogru) {
            feedbackMessage.textContent = "Harika! DoÄŸru sÄ±ralama. ðŸŽ‰";
            feedbackMessage.className = "correct";
            
            setTimeout(() => {
                mevcutSeviye++;
                if (mevcutSeviye > maxSeviye) {
                    oyunuBitir();
                } else {
                    soruGetir(mevcutSeviye);
                }
            }, 1500);

        } else {
            feedbackMessage.textContent = "Tam olmadÄ±, tekrar dene. ðŸ¤”";
            feedbackMessage.className = "incorrect";
            // Hata efekti (sallanma)
            wordList.style.animation = 'shake 0.5s';
            setTimeout(() => {
                wordList.style.animation = '';
            }, 500);
        }
    }

    function oyunuBitir() {
        gameActiveDiv.style.display = 'none';
        winScreenDiv.style.display = 'block';
    }

    function oyunuBaslat() {
        mevcutSeviye = 1;
        gameActiveDiv.style.display = 'block';
        winScreenDiv.style.display = 'none';
        soruGetir(mevcutSeviye);
    }

    // --- 5. DRAG & DROP FONKSÄ°YONLARI ---
    function dragDropOlaylariniEkle() {
        const items = wordList.querySelectorAll('.word-item');
        
        items.forEach(item => {
            item.addEventListener('dragstart', () => {
                suruklenenOge = item;
                setTimeout(() => item.classList.add('dragging'), 0);
            });
            
            item.addEventListener('dragend', () => {
                item.classList.remove('dragging');
                suruklenenOge = null;
            });

            item.addEventListener('dragover', (e) => {
                e.preventDefault();
                items.forEach(i => i.classList.remove('over'));
                item.classList.add('over');
            });

            item.addEventListener('dragleave', () => {
                item.classList.remove('over');
            });

            item.addEventListener('drop', (e) => {
                e.preventDefault();
                item.classList.remove('over');
                if (item === suruklenenOge) return;
                
                // Ã–ÄŸelerin pozisyonlarÄ±nÄ± al
                const rectSuruklenen = suruklenenOge.getBoundingClientRect();
                const rectHedef = item.getBoundingClientRect();

                // EÄŸer sÃ¼rÃ¼klenen, hedefin altÄ±ndaysa, hedeften Ã¶nce ekle
                if (rectSuruklenen.top > rectHedef.top) {
                    wordList.insertBefore(suruklenenOge, item);
                } else {
                // EÄŸer sÃ¼rÃ¼klenen, hedefin Ã¼stÃ¼ndeyse, hedeften sonra ekle
                    wordList.insertBefore(suruklenenOge, item.nextSibling);
                }
            });
        });
    }

    // --- 6. OLAY DÄ°NLEYÄ°CÄ°LERÄ° ---
    checkButton.addEventListener('click', kontolEt);
    restartButton.addEventListener('click', oyunuBaslat);

    // --- OYUNU BAÅžLAT ---
    oyunuBaslat();
});

</script>

<style>
    @keyframes shake {
        0% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        50% { transform: translateX(5px); }
        75% { transform: translateX(-5px); }
        100% { transform: translateX(0); }
    }
</style>

</body>
</html>
