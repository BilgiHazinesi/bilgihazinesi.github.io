<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Türkçesi Varken! - Bilgi Hazinesi</title>
    
    <base href="https://bilgihazinesi.github.io/">

    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Crimson+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="stiller/stil.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        /* Bu sayfaya özel stiller, ana temanıza uyumlu */
        :root {
            --memory-card-bg: #e6dccb;
            --memory-card-matched-bg: #c8e6c9;
        }

        body {
            font-family: 'Crimson Pro', serif;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
            padding: 20px;
        }
        header h1 a {
            font-family: 'Cinzel Decorative', cursive;
            color: var(--text-primary-color);
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-decoration: none;
        }
        header p {
            font-size: 1.1rem;
            margin-bottom: 30px;
            color: var(--text-secondary-color);
        }
        .tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }
        .tab-button {
            padding: 12px 25px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--papyrus-bg-color-dark);
            color: var(--text-secondary-color);
            font-size: 1rem;
            font-family: 'Crimson Pro', serif;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .tab-button.active, .tab-button:hover {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        .activity-content { display: none; }
        .activity-content.active { display: block; }
        
        /* Kartları Öğrenelim */
        #learn-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            perspective: 1000px;
        }
        .card {
            background-color: transparent;
            height: 120px;
            border-radius: 12px;
            cursor: pointer;
            position: relative;
        }
        .card-face-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        .card.is-flipped .card-face-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: var(--shadow-color);
            font-size: 1.2rem;
            font-weight: 700;
            flex-direction: column;
            box-sizing: border-box;
        }
        .card-front {
            background: var(--papyrus-bg-color-dark);
            color: var(--text-primary-color);
        }
        .card-back {
            background: var(--active-bg-color);
            color: var(--text-primary-color);
            transform: rotateY(180deg);
        }
        .card-back span { display: block; }

        /* Quiz Bölümleri */
        .quiz-card {
            background-color: var(--papyrus-bg-color-dark);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-color);
            margin: 0 auto 20px auto;
            max-width: 600px;
        }
        .question { font-size: 1.2rem; margin-bottom: 20px; line-height: 1.5; }
        
        #fill-blanks input {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--border-color);
            background: var(--papyrus-bg-color-light);
            border-radius: 8px;
            font-size: 1.1rem;
            font-family: 'Crimson Pro', serif;
            text-align: center;
            box-sizing: border-box;
        }
        
        #sentence-quiz .options { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 10px; 
            margin-top: 15px; 
        }
        #sentence-quiz .option-btn {
            width: 100%;
            background-color: var(--papyrus-bg-color-dark);
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
            border-radius: 8px;
            padding: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        #sentence-quiz .option-btn:hover { background-color: var(--accent-color); color: white; }
        #sentence-quiz .option-btn.correct { background-color: #66bb6a; color: white; border-color: #66bb6a; }
        #sentence-quiz .option-btn.wrong { background-color: #ef5350; color: white; border-color: #ef5350; }
        #sentence-quiz .option-btn:disabled { cursor: not-allowed; opacity: 0.7; }

        .quiz-buttons { margin-top: 20px; display: flex; justify-content: center; gap: 15px; }
        .quiz-btn { 
            padding: 10px 20px; 
            border: none; 
            border-radius: 8px; 
            font-size: 1rem; 
            font-family: 'Crimson Pro', serif; 
            font-weight: 600; 
            cursor: pointer; 
            transition: background 0.2s; 
        }
        .check-btn { background-color: var(--accent-color); color: white; }
        .next-btn { background-color: var(--text-secondary-color); color: white; }
        .feedback { font-weight: 700; margin-top: 15px; min-height: 24px; }
        .correct { color: #2e7d32; }
        .wrong { color: #c62828; }
        
        /* Akılda Tut Oyunu Stilleri */
        #memory-setup { margin-bottom: 30px; }
        #memory-setup h2 { font-family: 'Cinzel Decorative', cursive; }
        #memory-status { margin-bottom: 20px; font-size: 1.2rem; font-weight: 700; min-height: 30px;}
        #memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 700px;
            margin: auto;
            perspective: 1000px;
        }
        .memory-card {
            height: 140px;
            cursor: pointer;
            position: relative;
        }
        .memory-card .card-face-inner { transform: rotateY(0); }
        .memory-card.is-flipped .card-face-inner { transform: rotateY(180deg); }
        .memory-card.is-matched .card-face-inner { transform: rotateY(0); }
        .memory-card.is-matched { cursor: default; }

        .memory-card .card-front {
            background: var(--memory-card-bg);
            font-size: 2.5rem;
            color: var(--accent-color);
        }
        .memory-card .card-back {
             background: var(--papyrus-bg-color-light);
             font-size: 1.1rem;
             font-weight: 700;
        }
        .memory-card.is-matched .card-back,
        .memory-card.is-matched .card-front {
            background-color: var(--memory-card-matched-bg);
            border: 2px solid var(--accent-color);
            color: #2e7d32;
        }

        /* MOBİL UYUMLULUK */
        @media (max-width: 768px) {
            header h1 a { font-size: 2rem; }
            header p { font-size: 1rem; }
            .tab-button { padding: 10px 15px; font-size: 0.9rem; }
            .card { height: 100px; }
            .card-front, .card-back { font-size: 1rem; }
            
            #sentence-quiz .options { grid-template-columns: 1fr; }
            
            #memory-grid { grid-template-columns: repeat(3, 1fr); gap: 10px; }
            .memory-card { height: 120px; }
            .memory-card .card-back { font-size: 0.9rem; }
        }
    </style>
</head>
<body>

    <div id="menu-container"></div>

    <div class="container">
        <header>
            <h1><a href="https://bilgihazinesi.github.io/">Türkçesi Varken!</a></h1>
            <p>Yabancı kelimeler yerine dilimizin zenginliğindeki Türkçe karşılıklarını kullanalım.</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="showActivity('learn')">Kartları Öğren</button>
            <button class="tab-button" onclick="showActivity('fill')">Boşluk Doldur</button>
            <button class="tab-button" onclick="showActivity('sentence')">Cümleyi Düzelt</button>
            <button class="tab-button" onclick="showActivity('memory')">Akılda Tut</button>
        </div>

        <main>
            <div id="learn" class="activity-content active">
                <div id="learn-cards"></div>
            </div>

            <div id="fill" class="activity-content">
                <div id="fill-blanks">
                    <div class="quiz-card">
                        <p class="question" id="fill-question"></p>
                        <input type="text" id="fill-answer" placeholder="Türkçesini yazın...">
                        <p class="feedback" id="fill-feedback"></p>
                         <div class="quiz-buttons">
                            <button class="quiz-btn check-btn" onclick="fillBlanks.checkAnswer()">Kontrol Et</button>
                            <button class="quiz-btn next-btn" onclick="fillBlanks.loadQuestion()">Sonraki</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="sentence" class="activity-content">
                <div id="sentence-quiz">
                     <div class="quiz-card">
                        <p class="question" id="sentence-question"></p>
                        <div class="options" id="sentence-options"></div>
                        <p class="feedback" id="sentence-feedback"></p>
                        <div class="quiz-buttons">
                           <button class="quiz-btn next-btn" onclick="sentenceQuiz.loadQuestion()">Sonraki Soru</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="memory" class="activity-content">
                <div id="memory-setup">
                    <h2>Oyun Modunu Seç</h2>
                    <button class="quiz-btn check-btn" onclick="memoryGame.init('single')">Tek Kişilik</button>
                    <button class="quiz-btn check-btn" onclick="memoryGame.init('twoPlayer')">İki Kişilik</button>
                </div>

                <div id="memory-game-area" style="display: none;">
                    <div id="memory-status"></div>
                    <div id="memory-grid"></div>
                    <div class="quiz-buttons">
                        <button class="quiz-btn next-btn" onclick="memoryGame.reset()">Yeni Oyun</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Sitedeki tüm kelimelerin tam listesi
        const wordsData = [
            { "yabanci": "Absürt", "turkce": ["Saçma", "Anlamsız"], "cumle": "Anlattığı olaylar o kadar __ geldi ki kimse inanmadı." },
            { "yabanci": "Laptop", "turkce": ["Dizüstü bilgisayar"], "cumle": "Ödevimi yapmak için __'ımı yanıma aldım." },
            { "yabanci": "Jenerasyon", "turkce": ["Kuşak", "Soy"], "cumle": "Yeni __ teknolojiye çok daha hâkim." },
            { "yabanci": "Defans", "turkce": ["Savunma"], "cumle": "Takımımız maç boyunca çok iyi bir __ yaptı." },
            { "yabanci": "Stil", "turkce": ["Üslup", "Biçem"], "cumle": "Her yazarın kendine özgü bir anlatım __'i vardır." },
            { "yabanci": "Star", "turkce": ["Yıldız"], "cumle": "Yeni filmin __'ı çok sevilen bir oyuncuydu." },
            { "yabanci": "Filtre", "turkce": ["Süzgeç"], "cumle": "Çayı demlerken yaprakları ayırmak için __ kullandı." },
            { "yabanci": "Antipatik", "turkce": ["Sevimsiz"], "cumle": "Davranışları yüzünden oldukça __ birine dönüştü." },
            { "yabanci": "Galeri", "turkce": ["Sergi"], "cumle": "Ünlü ressamın eserleri sanat __'sinde gösteriliyor." },
            { "yabanci": "Spiker", "turkce": ["Sunucu"], "cumle": "Haberleri her akşam aynı __ sunuyordu." },
            { "yabanci": "Anons", "turkce": ["Duyuru"], "cumle": "Okul müdürü toplantı için bir __ yaptı." },
            { "yabanci": "Ofis", "turkce": ["İş yeri"], "cumle": "Babam her sabah __'e gitmek için erken kalkar." },
            { "yabanci": "Dizayn", "turkce": ["Tasarım"], "cumle": "Yeni evin __'ı çok modern ve kullanışlıydı." },
            { "yabanci": "Agresif", "turkce": ["Saldırgan", "Sinirli"], "cumle": "Oyun kaybedince __ tavırlar sergiledi." },
            { "yabanci": "Kaos", "turkce": ["Kargaşa"], "cumle": "Elektrikler kesilince salonda bir __ ortamı oluştu." },
            { "yabanci": "Mouse", "turkce": ["Fare"], "cumle": "Bilgisayar __'u çalışmadığı için tıklama yapamıyorum." },
            { "yabanci": "Link", "turkce": ["Ağ", "Bağlantı"], "cumle": "Öğretmen, konuyu anlatan videonun __'ini bizimle paylaştı." },
            { "yabanci": "Spontane", "turkce": ["Kendiliğinden"], "cumle": "Plan yapmamıştık, her şey __ gelişti." },
            { "yabanci": "Exit", "turkce": ["Çıkış"], "cumle": "Acil durumlarda __ kapısını kullanmalısınız." },
            { "yabanci": "Aktivite", "turkce": ["Etkinlik"], "cumle": "Hafta sonu okulda birçok sosyal __ düzenlendi." },
            { "yabanci": "Trend", "turkce": ["Eğilim"], "cumle": "Bu yılın modasında renkli kıyafetler yeni __ oldu." },
            { "yabanci": "Okey", "turkce": ["Tamam"], "cumle": "Ödevi yapacağımı söyledim, o da '__' dedi." },
            { "yabanci": "Selfie", "turkce": ["Öz çekim"], "cumle": "Gezdiğimiz güzel yerlerde bol bol __ yaptık." },
            { "yabanci": "Şov", "turkce": ["Gösteri"], "cumle": "Sirkteki palyaçonun __'u çok eğlenceliydi." },
            { "yabanci": "Aroma", "turkce": ["Hoş koku"], "cumle": "Annemin yaptığı kekin vanilyalı __'sı tüm eve yayıldı." },
            { "yabanci": "Abes", "turkce": ["Anlamsız"], "cumle": "Bu kadar __ bir işle uğraşmak istemiyorum." },
            { "yabanci": "Abluka", "turkce": ["Kuşatma"], "cumle": "Şehir, düşman tarafından __ altına alındı." },
            { "yabanci": "Adapte", "turkce": ["Uyum"], "cumle": "Yeni işine çabucak __ oldu." },
            { "yabanci": "Aktüel", "turkce": ["Güncel"], "cumle": "__ konuları takip etmeyi severim." },
            { "yabanci": "Alternatif", "turkce": ["Seçenek"], "cumle": "Bu sorunu çözmek için başka bir __ düşünmeliyiz." },
            { "yabanci": "Amblem", "turkce": ["Belirtke"], "cumle": "Okulun __'i çok güzel tasarlanmış." },
            { "yabanci": "Animasyon", "turkce": ["Canlandırma"], "cumle": "Çocuklar __ filmlerini izlemeyi çok seviyor." },
            { "yabanci": "Bariyer", "turkce": ["Engel"], "cumle": "Yolun ortasındaki __'i fark etmedi." },
            { "yabanci": "Biyografi", "turkce": ["Özgeçmiş"], "cumle": "Atatürk'ün __'sini okudum." },
            { "yabanci": "Bodyguard", "turkce": ["Koruma"], "cumle": "Ünlü şarkıcının yanında hep bir __ vardı." },
            { "yabanci": "Brifing", "turkce": ["Bilgilendirme"], "cumle": "Müdür, proje hakkında kısa bir __ verdi." },
            { "yabanci": "Check-up", "turkce": ["Tümtanı"], "cumle": "Her yıl düzenli olarak __ yaptırırım." },
            { "yabanci": "Data", "turkce": ["Veri"], "cumle": "Araştırma için gerekli __'ları topladık." },
            { "yabanci": "Deforme", "turkce": ["Şekli bozulmuş"], "cumle": "Sıcakta kalan kutu __ olmuş." },
            { "yabanci": "Dijital", "turkce": ["Sayısal"], "cumle": "__ saatimi yeni aldım." },
            { "yabanci": "Download", "turkce": ["İndirmek"], "cumle": "Beğendiğim şarkıyı telefonuma __ yaptım." },
            { "yabanci": "Dublaj", "turkce": ["Seslendirme"], "cumle": "Filmin Türkçe __'ı çok başarılıydı." },
            { "yabanci": "E-mail", "turkce": ["E-posta"], "cumle": "Sana ödevle ilgili bir __ gönderdim." },
            { "yabanci": "Efor", "turkce": ["Çaba"], "cumle": "Bu projeye çok __ harcadı." },
            { "yabanci": "Egoist", "turkce": ["Bencil"], "cumle": "__ insanlar yalnızca kendilerini düşünür." },
            { "yabanci": "Egzersiz", "turkce": ["Alıştırma"], "cumle": "Her sabah spor __'leri yaparım." },
            { "yabanci": "Final", "turkce": ["Son"], "cumle": "Dizinin __ bölümü çok heyecanlıydı." },
            { "yabanci": "Global", "turkce": ["Küresel"], "cumle": "İklim değişikliği __ bir sorundur." },
            { "yabanci": "Gurme", "turkce": ["Tatbilir"], "cumle": "O, peynir konusunda tam bir __'dir." },
            { "yabanci": "Hit", "turkce": ["Gözde"], "cumle": "Bu şarkı, yazın en __ parçası oldu." },
            { "yabanci": "İskonto", "turkce": ["İndirim"], "cumle": "Mağaza, sezon sonunda büyük bir __ yaptı." },
            { "yabanci": "Limit", "turkce": ["Sınır"], "cumle": "Hız __'ini aşmamalısın." },
            { "yabanci": "Market", "turkce": ["Satış merkezi"], "cumle": "Akşam için __'ten alışveriş yapacağım." },
            { "yabanci": "Mesaj", "turkce": ["Bildiri", "İleti"], "cumle": "Doğum günüm için birçok tebrik __'ı aldım." },
            { "yabanci": "Modern", "turkce": ["Çağdaş"], "cumle": "__ sanat eserlerini inceledik." },
            { "yabanci": "Mönü", "turkce": ["Yemek listesi"], "cumle": "Lütfen __'yü getirir misiniz?" }
        ];

        // Sayfa yüklendiğinde tüm etkinlikleri başlatan kod
        document.addEventListener('DOMContentLoaded', () => {
            setupLearnCards();
            fillBlanks.loadQuestion();
            sentenceQuiz.loadQuestion();
        });
        
        // Sekme değiştirme fonksiyonu
        function showActivity(activityId) {
            document.querySelectorAll('.activity-content').forEach(el => el.classList.remove('active'));
            document.getElementById(activityId).classList.add('active');
            
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.tab-button[onclick="showActivity('${activityId}')"]`).classList.add('active');

            // Başka bir sekmeye geçildiğinde hafıza oyununu sıfırla
            if (activityId !== 'memory') {
                 memoryGame.reset();
            }
        }
        
        // Dizi karıştırma fonksiyonu
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- 1. ETKİNLİK: KARTLARI ÖĞREN ---
        function setupLearnCards() {
            const container = document.getElementById('learn-cards');
            container.innerHTML = '';
            shuffleArray([...wordsData]).forEach(word => {
                const card = document.createElement('div');
                card.classList.add('card');
                const turkceHtml = word.turkce.map(t => `<span>${t}</span>`).join('<br>');
                card.innerHTML = `
                    <div class="card-face-inner">
                        <div class="card-face card-front">${word.yabanci}</div>
                        <div class="card-face card-back">${turkceHtml}</div>
                    </div>
                `;
                card.addEventListener('click', () => card.classList.toggle('is-flipped'));
                container.appendChild(card);
            });
        }
        
        // --- 2. ETKİNLİK: BOŞLUK DOLDURMA ---
        const fillBlanks = {
            currentIndex: -1,
            shuffledWords: [],
            
            loadQuestion: function() {
                if (this.shuffledWords.length === 0) { 
                    this.shuffledWords = shuffleArray([...wordsData].filter(w => w.cumle)); 
                }
                this.currentIndex = (this.currentIndex + 1) % this.shuffledWords.length;
                const word = this.shuffledWords[this.currentIndex];
                
                // Cümleyi __ ile göster, cevabın yabancı kelime olmasını sağla
                document.getElementById('fill-question').innerHTML = `Aşağıdaki cümlenin boşluğuna hangi kelime gelmelidir? <br><br> "${word.cumle}"`;
                
                document.getElementById('fill-answer').value = '';
                document.getElementById('fill-feedback').textContent = '';
                document.getElementById('fill-feedback').className = 'feedback';
                document.getElementById('fill-answer').disabled = false;
            },
            
            checkAnswer: function() {
                const currentWord = this.shuffledWords[this.currentIndex];
                if (!currentWord) return;
                
                // Cevap, YABANCI kelimenin kendisidir. Türkçe karşılıklarını değil.
                const correctAnswers = currentWord.turkce.map(ans => ans.toLowerCase().trim());
                const userAnswer = document.getElementById('fill-answer').value.toLowerCase().trim();
                const feedbackEl = document.getElementById('fill-feedback');
                
                if (correctAnswers.includes(userAnswer)) {
                    feedbackEl.textContent = "Harika! Doğru bildin!";
                    feedbackEl.className = 'feedback correct';
                } else {
                    feedbackEl.innerHTML = `Tekrar dene! <br>Doğru cevap: <strong>${currentWord.turkce.join(' / ')}</strong>`;
                    feedbackEl.className = 'feedback wrong';
                }
                document.getElementById('fill-answer').disabled = true;
            }
        };
        
        // --- 3. ETKİNLİK: CÜMLEYİ DÜZELT (ÇOKTAN SEÇMELİ) ---
        const sentenceQuiz = {
            currentIndex: -1,
            shuffledWords: [],
            loadQuestion: function() {
                if (this.shuffledWords.length === 0) { this.shuffledWords = shuffleArray([...wordsData]); }
                this.currentIndex = (this.currentIndex + 1) % this.shuffledWords.length;
                const word = this.shuffledWords[this.currentIndex];
                const correctAnswer = word.turkce[0]; // Cevap için ilk Türkçe karşılığı al
                
                const questionText = `Aşağıdaki cümlede renkli yazılmış kelimenin Türkçe karşılığı hangisidir? <br><br> "Bu çok <strong>${word.yabanci}</strong> bir hareketti."`;
                document.getElementById('sentence-question').innerHTML = questionText;
                
                const optionsContainer = document.getElementById('sentence-options');
                optionsContainer.innerHTML = '';
                
                // Kendisi dışındaki kelimelerin Türkçe karşılıklarından yanlış seçenekler oluştur
                const wrongOptionsPool = wordsData
                    .filter(w => w.turkce[0] !== correctAnswer)
                    .map(w => w.turkce[0]);
                
                const shuffledWrong = shuffleArray(wrongOptionsPool).slice(0, 3);
                const options = shuffleArray([correctAnswer, ...shuffledWrong]);

                options.forEach(option => {
                    const button = document.createElement('button');
                    button.classList.add('option-btn');
                    button.textContent = option;
                    button.onclick = () => this.checkAnswer(option, correctAnswer);
                    optionsContainer.appendChild(button);
                });
                
                document.getElementById('sentence-feedback').textContent = '';
                document.getElementById('sentence-feedback').className = 'feedback';
            },
            checkAnswer: function(selected, correct) {
                const feedbackEl = document.getElementById('sentence-feedback');
                const optionButtons = document.querySelectorAll('#sentence-options .option-btn');
                
                optionButtons.forEach(btn => {
                    btn.disabled = true;
                    if(btn.textContent === correct) {
                        btn.classList.add('correct');
                    } else if (btn.textContent === selected) {
                        btn.classList.add('wrong');
                    }
                });
                if (selected === correct) {
                    feedbackEl.textContent = 'Tebrikler, doğru cevap!';
                    feedbackEl.className = 'feedback correct';
                } else {
                    feedbackEl.textContent = 'Maalesef yanlış, doğru cevap işaretlendi.';
                    feedbackEl.className = 'feedback wrong';
                }
            }
        };

        // --- 4. ETKİNLİK: AKILDA TUT OYUNU ---
        const memoryGame = {
            gameMode: 'single',
            currentPlayer: 1,
            scores: { player1: 0, player2: 0 },
            flippedCards: [],
            matchedPairs: 0,
            totalPairs: 6, // 4x3'lük bir tahta için 6 çift
            isLocked: false,
            hamleSayisi: 0,

            init(mode) {
                this.gameMode = mode;
                this.resetState();
                
                document.getElementById('memory-setup').style.display = 'none';
                document.getElementById('memory-game-area').style.display = 'block';
                
                this.updateStatus();
                this.renderBoard();
            },

            resetState() {
                this.currentPlayer = 1;
                this.scores = { player1: 0, player2: 0 };
                this.flippedCards = [];
                this.matchedPairs = 0;
                this.isLocked = false;
                this.hamleSayisi = 0;
            },

            renderBoard() {
                const gameWords = shuffleArray([...wordsData]).slice(0, this.totalPairs);
                let gameCards = gameWords.flatMap((word, index) => [
                    { type: 'yabanci', value: word.yabanci, pairId: index },
                    { type: 'turkce', value: word.turkce[0], pairId: index } // Eşleştirme için ilk Türkçe karşılığı al
                ]);
                gameCards = shuffleArray(gameCards);

                const grid = document.getElementById('memory-grid');
                grid.innerHTML = '';
                gameCards.forEach(cardData => {
                    const cardEl = document.createElement('div');
                    cardEl.classList.add('memory-card');
                    cardEl.dataset.pairId = cardData.pairId;
                    cardEl.dataset.value = cardData.value; // Hata ayıklama için eklendi

                    cardEl.innerHTML = `
                        <div class="card-face-inner">
                            <div class="card-front"><i class="bi bi-patch-question"></i></div>
                            <div class="card-back">${cardData.value}</div>
                        </div>
                    `;
                    cardEl.addEventListener('click', () => this.handleCardClick(cardEl));
                    grid.appendChild(cardEl);
                });
            },

            handleCardClick(cardEl) {
                if (this.isLocked || cardEl.classList.contains('is-flipped') || cardEl.classList.contains('is-matched')) {
                    return;
                }

                cardEl.classList.add('is-flipped');
                this.flippedCards.push(cardEl);

                if (this.flippedCards.length === 2) {
                    this.isLocked = true;
                    this.hamleSayisi++;
                    this.checkForMatch();
                }
            },

            checkForMatch() {
                const [card1, card2] = this.flippedCards;
                const isMatch = card1.dataset.pairId === card2.dataset.pairId;
                
                if (isMatch) {
                    this.handleMatch();
                } else {
                    this.handleMismatch();
                }
            },

            handleMatch() {
                this.scores[`player${this.currentPlayer}`]++;
                this.matchedPairs++;
                
                this.flippedCards.forEach(card => card.classList.add('is-matched'));
                this.flippedCards = [];
                this.isLocked = false;
                
                if (this.matchedPairs === this.totalPairs) {
                    this.endGame();
                } else {
                     if (this.gameMode === 'twoPlayer') { this.updateStatus('Doğru! Tekrar oyna.'); }
                     else { this.updateStatus(); }
                }
            },

            handleMismatch() {
                setTimeout(() => {
                    this.flippedCards.forEach(card => card.classList.remove('is-flipped'));
                    this.flippedCards = [];
                    this.isLocked = false;
                    if (this.gameMode === 'twoPlayer') {
                        this.switchPlayer();
                    }
                     this.updateStatus();
                }, 1200);
            },

            switchPlayer() {
                this.currentPlayer = this.currentPlayer === 1 ? 2 : 1;
            },

            updateStatus(message = '') {
                const statusEl = document.getElementById('memory-status');
                if (this.gameMode === 'single') {
                    statusEl.textContent = `Hamle: ${this.hamleSayisi} | Bulunan Çift: ${this.scores.player1} / ${this.totalPairs}`;
                } else {
                    let statusText = `Skor: Oyuncu 1: ${this.scores.player1} - Oyuncu 2: ${this.scores.player2} | Sıra: Oyuncu ${this.currentPlayer}`;
                    if(message) {
                        statusText = `${message} | ${statusText}`;
                    }
                    statusEl.textContent = statusText;
                }
            },
            
            endGame(){
                 const statusEl = document.getElementById('memory-status');
                 let endMessage = `Tebrikler! ${this.hamleSayisi} hamlede oyunu bitirdin!`;
                 if (this.gameMode === 'twoPlayer') {
                    if (this.scores.player1 > this.scores.player2) endMessage = "Tebrikler, Oyuncu 1 Kazandı!";
                    else if (this.scores.player2 > this.scores.player1) endMessage = "Tebrikler, Oyuncu 2 Kazandı!";
                    else endMessage = "Oyun Berabere!";
                 }
                 statusEl.textContent = endMessage;
            },

            reset() {
                this.resetState();
                document.getElementById('memory-game-area').style.display = 'none';
                document.getElementById('memory-setup').style.display = 'block';
            }
        };

    </script>

    <script src="bilesenler/menu.js"></script>

</body>
</html>
