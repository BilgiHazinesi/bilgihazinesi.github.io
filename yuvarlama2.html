<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EtkileÅŸimli Yuvarlama MacerasÄ± - PYP</title>
    <style>
        :root {
            --primary-color: #4CAF50; /* YeÅŸil */
            --secondary-color: #FFC107; /* SarÄ± */
            --background-color: #f8f9fa;
            --text-color: #333;
            --border-radius: 12px;
            --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            width: 100%;
            max-width: 950px;
            margin: 0 auto;
        }
        .header, .section {
            background-color: #fff;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border-left: 5px solid var(--primary-color);
        }
        h1, h2, h3 {
            color: var(--primary-color);
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-top: 0;
        }
        .pyp-intro {
            background-color: #e6ffe6; /* AÃ§Ä±k yeÅŸil */
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px dashed var(--primary-color);
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
        }
        .controls input[type="number"], .controls select, .controls button {
            padding: 12px 15px;
            font-size: 16px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }
        .controls input[type="number"] {
            width: 150px;
        }
        .controls button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .controls button:hover {
            background-color: #45a049;
        }
        .hill-container {
            position: relative;
            width: 100%;
            height: 200px; /* Tepenin yÃ¼ksekliÄŸi */
            margin-top: 40px;
            overflow: hidden; /* TaÅŸmalarÄ± gizle */
        }
        .hill-path {
            position: absolute;
            bottom: 20px; /* Yolun zeminden yÃ¼ksekliÄŸi */
            left: 10%;
            width: 80%;
            height: 150px; /* Yolun kavis yÃ¼ksekliÄŸi */
            border: 3px dashed #ccc;
            border-radius: 50% / 100%; /* YarÄ±m daire ÅŸekli */
            border-bottom: none; /* Alt Ã§izgiyi kaldÄ±r */
            border-left-color: transparent; /* Yan Ã§izgileri ÅŸeffaf yap */
            border-right-color: transparent;
        }
        .hill-label {
            position: absolute;
            bottom: -5px; /* Etiketlerin zemine yakÄ±nlÄ±ÄŸÄ± */
            font-weight: bold;
            font-size: 1.1em;
            background-color: #fff;
            padding: 2px 8px;
            border-radius: 6px;
            border: 1px solid var(--text-color);
        }
        .start-point { left: 5%; }
        .end-point { right: 5%; }
        .mid-point {
            left: 50%;
            transform: translateX(-50%);
            bottom: 130px; /* Orta noktanÄ±n tepe Ã¼zerindeki konumu */
            color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        .ball {
            position: absolute;
            font-size: 2.5em; /* Topun boyutu */
            transition: all 2s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* YumuÅŸak animasyon */
            transform-origin: center 15px; /* DÃ¶nme noktasÄ± */
            color: var(--secondary-color); /* Top rengi */
        }
        .explanation, #practice-feedback {
            margin-top: 20px;
            padding: 15px;
            background-color: #e6ffe6;
            border-radius: 8px;
            font-size: 1.1em;
            text-align: center;
            display: none; /* BaÅŸlangÄ±Ã§ta gizli */
        }
        #practice-feedback {
            font-weight: bold;
        }
        .correct { color: #28a745; }
        .incorrect { color: #dc3545; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>SayÄ±larÄ± Yuvarlama MacerasÄ±</h1>
        <div class="pyp-intro">
            <p><strong>Merak Edelim:</strong> Markete gittiÄŸinde alacaklarÄ±nÄ±n yaklaÅŸÄ±k ne kadar tutacaÄŸÄ±nÄ± veya stadyumdaki seyirci sayÄ±sÄ±nÄ± sÃ¶ylerken tam sayÄ± vermek yerine "yaklaÅŸÄ±k" bir deÄŸer kullanÄ±rÄ±z. Ä°ÅŸte bu, yuvarlamadÄ±r! SayÄ±larÄ± daha basit ve anlaÅŸÄ±lÄ±r hale getirmemize yarar.</p>
        </div>
    </div>

    <div class="section">
        <h2>KeÅŸfet ve GÃ¶r: En YakÄ±n OnluÄŸa Yuvarlama</h2>
        <p>AÅŸaÄŸÄ±ya 3, 4, 5 veya 6 basamaklÄ± bir sayÄ± yaz. Topun hangi onluÄŸa yuvarlandÄ±ÄŸÄ±nÄ± gÃ¶rerek keÅŸfet!</p>
        <div class="controls">
            <input type="number" id="numberInputOnlar" placeholder="SayÄ±yÄ± girin (Ã¶rn: 1234)">
            <button onclick="startRounding('onlar')">MacerayÄ± BaÅŸlat!</button>
        </div>
        <div class="hill-container">
            <div class="hill-path"></div>
            <div id="startPointOnlar" class="hill-label start-point"></div>
            <div id="midPointOnlar" class="hill-label mid-point"></div>
            <div id="endPointOnlar" class="hill-label end-point"></div>
            <div id="ballOnlar" class="ball">âš½</div>
        </div>
        <div id="explanationOnlar" class="explanation"></div>
    </div>

    <div class="section">
        <h2>KeÅŸfet ve GÃ¶r: En YakÄ±n YÃ¼zlÃ¼ÄŸe Yuvarlama</h2>
        <p>AÅŸaÄŸÄ±ya 3, 4, 5 veya 6 basamaklÄ± bir sayÄ± yaz. Topun hangi yÃ¼zlÃ¼ÄŸe yuvarlandÄ±ÄŸÄ±nÄ± gÃ¶rerek keÅŸfet!</p>
        <div class="controls">
            <input type="number" id="numberInputYuzler" placeholder="SayÄ±yÄ± girin (Ã¶rn: 12345)">
            <button onclick="startRounding('yuzler')">MacerayÄ± BaÅŸlat!</button>
        </div>
        <div class="hill-container">
            <div class="hill-path"></div>
            <div id="startPointYuzler" class="hill-label start-point"></div>
            <div id="midPointYuzler" class="hill-label mid-point"></div>
            <div id="endPointYuzler" class="hill-label end-point"></div>
            <div id="ballYuzler" class="ball">ğŸ€</div>
        </div>
        <div id="explanationYuzler" class="explanation"></div>
    </div>

    <div class="section">
        <h2>SÄ±ra Sende: Bilgini Test Et!</h2>
        <p>Hadi Ã¶ÄŸrendiklerimizi pekiÅŸtirelim. BakalÄ±m doÄŸru yuvarlayabilecek misin?</p>
        <div class="controls">
            <button onclick="generatePractice()">Yeni Soru Getir</button>
            <h3 id="practiceQuestion" style="margin: 0;"></h3>
        </div>
        <div class="controls">
            <input type="number" id="practiceInput" placeholder="CevabÄ±nÄ± yaz...">
            <button onclick="checkPractice()">Kontrol Et</button>
        </div>
        <div id="practice-feedback"></div>
    </div>
</div>

<script>
    let practiceNumber = 0;
    let practiceRoundTo = 0;
    let practiceAnswer = 0;

    function startRounding(type) {
        const inputId = type === 'onlar' ? 'numberInputOnlar' : 'numberInputYuzler';
        const ballId = type === 'onlar' ? 'ballOnlar' : 'ballYuzler';
        const startPointId = type === 'onlar' ? 'startPointOnlar' : 'startPointYuzler';
        const midPointId = type === 'onlar' ? 'midPointOnlar' : 'midPointYuzler';
        const endPointId = type === 'onlar' ? 'endPointOnlar' : 'endPointYuzler';
        const explanationId = type === 'onlar' ? 'explanationOnlar' : 'explanationYuzler';

        const num = parseInt(document.getElementById(inputId).value);
        const roundTo = type === 'onlar' ? 10 : 100;

        if (isNaN(num) || num < 100 || num > 999999) {
            alert("LÃ¼tfen 3 ila 6 basamaklÄ± bir sayÄ± girin.");
            return;
        }

        const lowerBound = Math.floor(num / roundTo) * roundTo;
        const upperBound = lowerBound + roundTo;
        const midPointVal = lowerBound + roundTo / 2;

        document.getElementById(startPointId).innerText = lowerBound;
        document.getElementById(endPointId).innerText = upperBound;
        document.getElementById(midPointId).innerText = `${midPointVal} (Orta Nokta)`;

        const ball = document.getElementById(ballId);
        const explanation = document.getElementById(explanationId);

        // Calculate ball's initial position on the curved path
        const range = upperBound - lowerBound;
        let positionPercentage;
        if (range === 0) { // Handle cases like 100, 200 for tens where range is 0 initially for midpoint calc
            positionPercentage = 10;
        } else {
            positionPercentage = ((num - lowerBound) / range) * 80 + 10; // Position on 80% width path (10% left offset)
        }
        
        // Ensure position is within bounds
        positionPercentage = Math.max(10, Math.min(90, positionPercentage));

        const yPos = 130 * Math.sin(Math.PI * (positionPercentage - 10) / 80); // Sine wave for hill shape
        const rotation = 90 - (180 * (positionPercentage - 10) / 80); // Adjust rotation based on position

        ball.style.transition = 'none'; // Reset transition for instant positioning
        ball.style.left = `${positionPercentage}%`;
        ball.style.bottom = `${20 + yPos}px`;
        ball.style.transform = `translateX(-50%) rotate(${rotation}deg)`;
        
        explanation.style.display = 'none';

        setTimeout(() => {
            ball.style.transition = 'all 2s cubic-bezier(0.68, -0.55, 0.27, 1.55)';
            const roundedResult = Math.round(num / roundTo) * roundTo;
            let explanationText = '';
            
            if (num >= midPointVal) {
                // Move to end point
                ball.style.left = '90%';
                ball.style.bottom = '20px';
                ball.style.transform = 'translateX(-50%) rotate(0deg)';
                explanationText = `GÃ¶rdÃ¼n mÃ¼? ${num} sayÄ±sÄ±, orta nokta olan ${midPointVal}'e eÅŸit veya ondan bÃ¼yÃ¼k olduÄŸu iÃ§in bir sonraki durak olan ${upperBound}'a yuvarlandÄ±!`;
            } else {
                // Move to start point
                ball.style.left = '10%';
                ball.style.bottom = '20px';
                ball.style.transform = 'translateX(-50%) rotate(0deg)';
                explanationText = `GÃ¶rdÃ¼n mÃ¼? ${num} sayÄ±sÄ±, orta nokta olan ${midPointVal}'ten kÃ¼Ã§Ã¼k olduÄŸu iÃ§in Ã¶nceki durak olan ${lowerBound}'a yuvarlandÄ±!`;
            }
            
            setTimeout(() => {
                explanation.innerText = explanationText;
                explanation.style.display = 'block';
            }, 2000); // Show explanation after animation
        }, 100);
    }

    function generatePractice() {
        const digits = Math.floor(Math.random() * 4) + 3; // 3, 4, 5, or 6
        const min = Math.pow(10, digits - 1);
        const max = Math.pow(10, digits) - 1;
        practiceNumber = Math.floor(Math.random() * (max - min + 1)) + min;

        practiceRoundTo = Math.random() < 0.5 ? 10 : 100; // Randomly choose onluk or yÃ¼zlÃ¼k
        
        document.getElementById('practiceQuestion').innerText = `${practiceNumber} sayÄ±sÄ±nÄ± en yakÄ±n ${practiceRoundTo === 10 ? 'onluÄŸa' : 'yÃ¼zlÃ¼ÄŸe'} yuvarla.`;
        practiceAnswer = Math.round(practiceNumber / practiceRoundTo) * practiceRoundTo;

        document.getElementById('practiceInput').value = '';
        document.getElementById('practice-feedback').style.display = 'none';
    }

    function checkPractice() {
        const userAnswer = parseInt(document.getElementById('practiceInput').value);
        const feedback = document.getElementById('practice-feedback');
        
        if (isNaN(userAnswer)) {
            alert("LÃ¼tfen bir sayÄ± girin.");
            return;
        }

        feedback.style.display = 'block';
        if (userAnswer === practiceAnswer) {
            feedback.innerText = "Harika! CevabÄ±n doÄŸru!";
            feedback.className = 'correct';
        } else {
            feedback.innerText = `Tekrar dene! DoÄŸru cevap ${practiceAnswer} olmalÄ±ydÄ±. Ä°stersen yukarÄ±daki tepelerde ${practiceNumber} sayÄ±sÄ±nÄ± deneyerek nedenini keÅŸfedebilirsin.`;
            feedback.className = 'incorrect';
        }
    }

    // Initial state for balls and practice question
    window.onload = () => {
        // Initial setup for 'onlar' section
        document.getElementById('ballOnlar').style.left = '10%';
        document.getElementById('ballOnlar').style.bottom = '20px';
        document.getElementById('ballOnlar').style.transform = 'translateX(-50%) rotate(0deg)';
        document.getElementById('startPointOnlar').innerText = "0";
        document.getElementById('endPointOnlar').innerText = "10";
        document.getElementById('midPointOnlar').innerText = "5 (Orta Nokta)";

        // Initial setup for 'yuzler' section
        document.getElementById('ballYuzler').style.left = '10%';
        document.getElementById('ballYuzler').style.bottom = '20px';
        document.getElementById('ballYuzler').style.transform = 'translateX(-50%) rotate(0deg)';
        document.getElementById('startPointYuzler').innerText = "0";
        document.getElementById('endPointYuzler').innerText = "100";
        document.getElementById('midPointYuzler').innerText = "50 (Orta Nokta)";

        generatePractice(); // Load initial practice question
    };
</script>

</body>
</html>
