<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>EÄŸitim AsistanÄ± V19</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div id="loader" class="loader"><div class="spin"></div></div>

    <div id="loginScreen" class="screen active">
        <div class="card login-card">
            <div class="logo"><i class="fab fa-telegram-plane"></i></div>
            <h2>Ã–ÄŸrenci & Ã–ÄŸretmen</h2>
            <input type="password" id="passIn" placeholder="GiriÅŸ Kodu" class="inp" inputmode="numeric">
            <button onclick="login()" class="btn-main">GÄ°RÄ°Å</button>
        </div>
    </div>

    <div id="appScreen" class="screen hidden">
        <header>
            <div><b id="uName">...</b><br><small id="uRole">...</small></div>
            <button onclick="location.reload()"><i class="fas fa-power-off"></i></button>
        </header>

        <main id="main">
            <div id="tab-home" class="tab hidden">
                <div class="stats-row">
                    <div class="stat-card"><h3>Ã–ÄŸrenci</h3><span id="cStu">0</span></div>
                    <div class="stat-card"><h3>SÄ±nav</h3><span id="cExam">0</span></div>
                </div>
                <h4 class="head">YÃ¶netim Paneli</h4>
                <div id="examList" class="list"></div>
                <button onclick="showModal('modalCreate')" class="fab"><i class="fas fa-plus"></i></button>
            </div>

            <div id="tab-analysis" class="tab hidden">
                <select id="anSelect" class="inp" onchange="runAnalysis()"><option>SÄ±nav SeÃ§iniz...</option></select>
                
                <div id="anResult" class="hidden">
                    <div class="stats-row">
                        <div class="stat-card"><h3>Ort. Net</h3><span id="sAvg">0</span></div>
                        <div class="stat-card"><h3>En YÃ¼ksek</h3><span id="sMax">0</span></div>
                        <div class="stat-card" style="border-color:red"><h3>Girmeyen</h3><span id="sAbsence" style="color:red">0</span></div>
                    </div>

                    <div class="card warning-card"><h4>âš ï¸ Zor Sorular</h4><div id="hardestQuestions"></div></div>
                    <div id="absentListContainer" class="hidden card error-card"><h4>ğŸš« Girmeyenler</h4><div id="absentList" style="display:flex; flex-wrap:wrap; gap:5px;"></div></div>

                    <h4 class="head">KUÅ BAKIÅI ANALÄ°Z</h4>
                    <div class="matrix-wrapper">
                        <table id="matrixTable"></table>
                    </div>
                </div>
            </div>

            <div id="tab-students" class="tab hidden">
                <input type="text" id="stuSearch" placeholder="Ã–ÄŸrenci Ara..." onkeyup="filterStu()" class="inp">
                <div id="studentList" class="list"></div>
            </div>

            <div id="tab-s-home" class="tab hidden">
                <h4 class="head">Aktif SÄ±navlar</h4>
                <div id="sExamList" class="grid-list"></div>
            </div>
            <div id="tab-s-hist" class="tab hidden">
                <h4 class="head">GeliÅŸimim</h4>
                <div class="card"><canvas id="sChart"></canvas></div>
                <div id="sHistList" class="list"></div>
            </div>
        </main>

        <nav>
            <div id="navTeacher" class="hidden">
                <button onclick="go('tab-home')" class="act"><i class="fas fa-home"></i>Ã–zet</button>
                <button onclick="go('tab-analysis')"><i class="fas fa-th"></i>Analiz</button>
                <button onclick="go('tab-students')"><i class="fas fa-users"></i>Ã–ÄŸrenci</button>
            </div>
            <div id="navStudent" class="hidden">
                <button onclick="go('tab-s-home')" class="act"><i class="fas fa-pen"></i>SÄ±navlar</button>
                <button onclick="go('tab-s-hist')"><i class="fas fa-history"></i>Karnem</button>
            </div>
        </nav>
    </div>

    <div id="modalCreate" class="modal hidden">
        <div class="box">
            <h3>SÄ±nav Ekle</h3>
            <input type="text" id="nId" placeholder="Kod" class="inp">
            <input type="text" id="nName" placeholder="Ad" class="inp">
            <div class="row">
                <input type="text" id="bName" placeholder="Ders" style="flex:2" class="inp">
                <input type="number" id="bCount" placeholder="Soru" style="flex:1" class="inp">
                <button onclick="addPart()" class="btn-icon">+</button>
            </div>
            <div id="bCont"></div>
            <div class="checks">
                <label><input type="checkbox" id="chkScore" checked> SonuÃ§</label>
                <label><input type="checkbox" id="chkRank"> SÄ±ra</label>
                <label><input type="checkbox" id="chkRetake"> Tekrar</label>
            </div>
            <div class="row">
                <button onclick="saveExam()" class="btn-main">KAYDET</button>
                <button onclick="closeModal('modalCreate')" class="btn-sec">Ä°PTAL</button>
            </div>
        </div>
    </div>

    <div id="modalReport" class="modal full hidden">
        <div class="head-bar"><button onclick="closeModal('modalReport')"><i class="fas fa-arrow-left"></i></button><span>Karne</span><div></div></div>
        <div id="repBody" class="body-scroll"></div>
    </div>

    <div id="modalExam" class="modal full hidden">
        <div class="head-bar"><button onclick="closeModal('modalExam')">Ã‡Ä±k</button><span id="runTitle">SÄ±nav</span><div></div></div>
        <div id="runBody" class="body-scroll"></div>
        <div class="foot-bar"><button onclick="finishExam()" class="btn-main">BÄ°TÄ°R VE GÃ–NDER</button></div>
    </div>

    <div id="modalPass" class="modal hidden">
        <div class="box">
            <h3>Åifre</h3>
            <p id="passName"></p>
            <input type="text" id="newPass" class="inp">
            <button onclick="doPass()" class="btn-main">DEÄÄ°ÅTÄ°R</button>
            <button onclick="closeModal('modalPass')" class="btn-sec">Ä°PTAL</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
