<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zeynal Ã–ÄŸretmenle Kelime AvÄ±</title>
    <style>
        /* Okul ve El YazÄ±sÄ± FontlarÄ± */
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Patrick+Hand&display=swap');
        
        body {
            font-family: 'Patrick Hand', cursive;
            background-color: #f0f8ff; /* AÃ§Ä±k gÃ¶kyÃ¼zÃ¼ mavisi */
            /* Arka plan deseni: Okul ikonlarÄ± */
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" opacity="0.1"><text x="10" y="30" font-size="20">ğŸŒ</text><text x="60" y="30" font-size="20">â—</text><text x="10" y="80" font-size="20">ğŸ§¬</text><text x="60" y="80" font-size="20">ğŸ“š</text></svg>');
            color: #2c3e50;
            text-align: center;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 700px;
            width: 95%;
            margin-top: 20px;
            padding: 30px;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
            border-bottom: 8px solid #3498db; /* AltÄ±na kalÄ±n Ã§izgi */
            position: relative;
            overflow: hidden;
        }

        /* BaÅŸlÄ±k Stili */
        h1 {
            font-family: 'Fredoka One', cursive;
            color: #2980b9;
            font-size: 2.5em;
            margin-bottom: 10px;
            letter-spacing: 1px;
            text-shadow: 2px 2px 0px #bee3f8;
        }

        /* KÃ¶ÅŸe SÃ¼sleri */
        .corner-icon {
            position: absolute;
            font-size: 3em;
            opacity: 0.8;
        }
        .tl { top: 10px; left: 15px; transform: rotate(-20deg); } /* Sol Ãœst */
        .tr { top: 10px; right: 15px; transform: rotate(20deg); } /* SaÄŸ Ãœst */

        /* YÃ¼kleniyor EkranÄ± */
        #loading-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
        }
        .loader {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #e67e22; /* Turuncu */
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Oyun AlanÄ± */
        #game-area { display: none; }
        
        /* Ä°statistik Paneli */
        .stats-bar {
            display: flex;
            justify-content: space-around;
            background-color: #ecf0f1;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
        }

        /* Harf KutularÄ± */
        #word-display {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .letter-box {
            width: 45px;
            height: 55px;
            border-bottom: 4px solid #34495e;
            border-radius: 5px;
            background-color: #f8f9fa;
            font-size: 2em;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2c3e50;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        .letter-box.revealed {
            background-color: #2ecc71; /* YeÅŸil */
            color: white;
            border-color: #27ae60;
            transform: translateY(-5px);
        }

        /* Ä°pucu Kutusu */
        #hint-box {
            font-size: 1.5em;
            color: #fff;
            margin: 20px 0;
            padding: 20px;
            background-color: #e67e22; /* CanlÄ± Turuncu */
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(230, 126, 34, 0.4);
            position: relative;
        }
        #hint-box::before {
            content: 'ğŸ’¡ Ä°PUCU';
            position: absolute;
            top: -12px;
            left: 20px;
            background: #d35400;
            color: white;
            padding: 2px 10px;
            font-size: 0.7em;
            border-radius: 10px;
        }

        /* Ä°nput ve Butonlar */
        input[type="text"] {
            padding: 15px;
            width: 70%;
            border-radius: 50px;
            border: 3px solid #bdc3c7;
            text-align: center;
            font-size: 1.4em;
            font-family: 'Fredoka One', cursive;
            color: #2c3e50;
            outline: none;
            transition: 0.3s;
        }
        input[type="text"]:focus { border-color: #3498db; }

        button {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.2em;
            font-family: 'Fredoka One', cursive;
            margin: 10px 5px;
            transition: transform 0.2s, box-shadow 0.2s;
            color: white;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
        }
        button:active { transform: translateY(4px); box-shadow: none; }
        
        #btn-letter { background-color: #f1c40f; color: #d35400; } /* SarÄ± */
        #btn-submit { background-color: #27ae60; } /* YeÅŸil */
        #btn-restart { background-color: #e74c3c; margin-top: 20px;} /* KÄ±rmÄ±zÄ± */

        .feedback { 
            margin-top: 15px; 
            font-weight: bold; 
            font-size: 1.4em; 
            min-height: 30px;
        }

        /* Final EkranÄ± & Konfeti */
        #final-screen { display: none; text-align: center; }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall linear forwards;
        }
        @keyframes fall { to { transform: translateY(100vh) rotate(720deg); } }

    </style>
</head>
<body>

    <div id="loading-screen">
        <div class="loader"></div>
        <h2>Sorular YÃ¼kleniyor...</h2>
        <p>Zeynal Ã–ÄŸretmen HazÄ±rlÄ±yor ğŸŒâœï¸</p>
    </div>

    <div id="game-area" class="container">
        <div class="corner-icon tl">ğŸš€</div>
        <div class="corner-icon tr">ğŸ¨</div>

        <h1>Zeynal Ã–ÄŸretmenle<br>Kelime AvÄ±</h1>
        
        <div class="stats-bar">
            <span id="q-count">Soru: 1/10</span>
            <span id="score">Puan: 0</span>
        </div>

        <div id="hint-box">Ä°pucu bekleniyor...</div>
        
        <div id="word-display"></div>
        
        <div>
            <button id="btn-letter">Harf Ver (-100 Puan)</button>
            <br>
            <input type="text" id="guess-input" placeholder="CEVABI YAZ" onkeypress="handleEnter(event)">
            <br>
            <button id="btn-submit" onclick="checkGuess()">Cevapla</button>
        </div>
        
        <div id="feedback" class="feedback"></div>
    </div>

    <div id="final-screen" class="container">
        <h1>ğŸ‰ TEBRÄ°KLER! ğŸ‰</h1>
        <p style="font-size: 1.5em;">BÃ¼tÃ¼n kelimeleri baÅŸarÄ±yla buldun!</p>
        <div style="font-size: 4em; margin: 20px;">ğŸ†</div>
        <p id="final-score" style="font-weight: bold; font-size: 1.8em; color: #27ae60;"></p>
        <p>Bilginin gÃ¼cÃ¼ seninle olsun...</p>
        <button id="btn-restart" onclick="location.reload()">Tekrar Oyna</button>
    </div>

    <script>
        // ============================================================
        // AYARLAR: GOOGLE SHEETS CSV LÄ°NKÄ°NÄ°ZÄ° AÅAÄIYA YAPIÅTIRIN
        // ============================================================
        const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSoGIsfx3q4A24MbeGif6c1Nnr6NSOw5PS40df8j34MyppgdNp4T4My20jeEH0kKJrpuehciw3J_QgR/pub?gid=0&single=true&output=csv"; 
        // ============================================================

        let questions = [];
        let currentQ = 0;
        let score = 0;
        let revealed = [];

        document.addEventListener('DOMContentLoaded', () => {
            fetchData();
        });

        function fetchData() {
            if(SHEET_CSV_URL.includes("BURAYA_GOOGLE")) {
                alert("UyarÄ±: Google Sheets CSV linkini koda yapÄ±ÅŸtÄ±rmayÄ± unuttunuz!");
                return;
            }

            fetch(SHEET_CSV_URL)
                .then(response => response.text())
                .then(data => {
                    parseCSV(data);
                    document.getElementById('loading-screen').style.display = 'none';
                    if(questions.length > 0) {
                        document.getElementById('game-area').style.display = 'block';
                        loadQuestion();
                    } else {
                        alert("Tablodan soru Ã§ekilemedi. Tablonun dolu olduÄŸundan emin olun.");
                    }
                })
                .catch(error => {
                    alert("Bir hata oluÅŸtu. Linki kontrol edin.");
                    console.error(error);
                });
        }

        function parseCSV(csvText) {
            const rows = csvText.split(/\r?\n/);
            // 1. satÄ±rdan baÅŸla (baÅŸlÄ±ÄŸÄ± atla)
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                if (!row) continue;
                
                // Basit CSV ayÄ±rma (VirgÃ¼lle)
                const parts = row.split(',');
                if (parts.length >= 2) {
                    const word = parts[0].trim().toUpperCase();
                    // Ä°pucunda virgÃ¼l varsa birleÅŸtir
                    const hint = parts.slice(1).join(',').trim(); 
                    if(word && hint) {
                        questions.push({ word: word, hint: hint });
                    }
                }
            }
        }

        function loadQuestion() {
            if (currentQ >= questions.length) {
                showFinal();
                return;
            }

            const q = questions[currentQ];
            document.getElementById('q-count').innerText = `Soru: ${currentQ + 1}/${questions.length}`;
            document.getElementById('hint-box').innerText = q.hint;
            document.getElementById('guess-input').value = "";
            document.getElementById('feedback').innerText = "";
            
            const display = document.getElementById('word-display');
            display.innerHTML = "";
            revealed = new Array(q.word.length).fill(false);

            for (let i = 0; i < q.word.length; i++) {
                let box = document.createElement('div');
                box.className = 'letter-box';
                box.id = `box-${i}`;
                box.innerText = "?"; // KapalÄ±yken soru iÅŸareti
                display.appendChild(box);
            }
        }

        document.getElementById('btn-letter').onclick = function() {
            const q = questions[currentQ];
            let unrevealedIndices = [];
            revealed.forEach((r, index) => { if (!r) unrevealedIndices.push(index); });

            if (unrevealedIndices.length > 0) {
                let randomIndex = unrevealedIndices[Math.floor(Math.random() * unrevealedIndices.length)];
                revealLetter(randomIndex, q.word[randomIndex]);
                
                score -= 100;
                updateScore();
            }
        };

        function revealLetter(index, char) {
            revealed[index] = true;
            let box = document.getElementById(`box-${index}`);
            box.innerText = char;
            box.classList.add('revealed');
        }

        function checkGuess() {
            const input = document.getElementById('guess-input');
            const userGuess = input.value.toLocaleUpperCase('tr-TR').trim();
            const correctWord = questions[currentQ].word;

            if (userGuess === correctWord) {
                document.getElementById('feedback').style.color = "#27ae60";
                document.getElementById('feedback').innerText = "âœ… HarikasÄ±n! DoÄŸru Cevap!";
                
                // Puan ekle (her harf iÃ§in 100 puan)
                score += (correctWord.length * 100);
                updateScore();

                // TÃ¼m harfleri aÃ§
                for(let i=0; i<correctWord.length; i++) {
                    revealLetter(i, correctWord[i]);
                }

                // Sonraki soruya geÃ§
                setTimeout(() => {
                    currentQ++;
                    loadQuestion();
                }, 1500);

            } else {
                document.getElementById('feedback').style.color = "#c0392b";
                document.getElementById('feedback').innerText = "âŒ Tekrar dene bakalÄ±m...";
                shakeInput();
            }
        }

        function updateScore() {
            document.getElementById('score').innerText = `Puan: ${score}`;
        }

        function handleEnter(e) {
            if (e.key === "Enter") checkGuess();
        }

        function shakeInput() {
            const input = document.getElementById('guess-input');
            input.style.transform = "translateX(10px)";
            setTimeout(() => { input.style.transform = "translateX(-10px)"; }, 100);
            setTimeout(() => { input.style.transform = "translateX(0)"; }, 200);
        }

        function showFinal() {
            document.getElementById('game-area').style.display = 'none';
            document.getElementById('final-screen').style.display = 'block';
            document.getElementById('final-score').innerText = `Toplam Puan: ${score}`;
            startConfetti();
        }

        // Basit Konfeti Efekti
        function startConfetti() {
            const colors = ['#e74c3c', '#3498db', '#f1c40f', '#2ecc71', '#9b59b6'];
            
            for(let i=0; i<50; i++) {
                let confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                document.body.appendChild(confetti);
            }
        }
    </script>
</body>
</html>
