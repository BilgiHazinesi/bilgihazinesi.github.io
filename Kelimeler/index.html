<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zeynal √ñƒüretmenle Kelime Avƒ±</title>
    <style>
        /* FONT DEƒûƒ∞≈ûƒ∞KLƒ∞ƒûƒ∞: Modern ve T√ºrk√ße karakter dostu "Nunito" */
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif; /* Modern Font */
            background-color: #eef2f3;
            /* Arka plan: Modern geometrik ve silik desen */
            background-image: radial-gradient(#dce4e8 15%, transparent 16%),
                              radial-gradient(#dce4e8 15%, transparent 16%);
            background-size: 60px 60px;
            background-position: 0 0, 30px 30px;
            color: #2c3e50;
            text-align: center;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 700px;
            width: 95%;
            margin-top: 30px;
            padding: 40px;
            background-color: #ffffff;
            border-radius: 25px;
            /* Modern g√∂lge efekti (Soft Shadow) */
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
            position: relative;
        }

        /* Modern Ba≈ülƒ±k Stili */
        h1 {
            font-weight: 900; /* Kalƒ±n */
            color: #2c3e50;
            font-size: 2.8em;
            margin-bottom: 5px;
            letter-spacing: -1px; /* Harfleri biraz yakla≈ütƒ±rarak modern g√∂r√ºn√ºm */
            line-height: 1.2;
        }
        
        .subtitle {
            font-size: 1.2em;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-weight: 400;
        }

        /* ƒ∞statistik Paneli */
        .stats-bar {
            display: flex;
            justify-content: space-between;
            background-color: #f8f9fa;
            padding: 15px 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            font-weight: 700;
            color: #34495e;
            border: 1px solid #e9ecef;
        }

        /* Harf Kutularƒ± - Modern Tasarƒ±m */
        #word-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .letter-box {
            width: 50px;
            height: 60px;
            border-radius: 12px;
            background-color: #ecf0f1;
            font-size: 2em;
            font-weight: 800; /* Kalƒ±n font */
            display: flex;
            align-items: center;
            justify-content: center;
            color: #bdc3c7; /* Kapalƒ±yken silik renk */
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Yaylanma efekti */
            box-shadow: inset 0 -4px 0 rgba(0,0,0,0.05);
        }
        
        .letter-box.revealed {
            background-color: #3498db; /* Mavi */
            color: white;
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        /* ƒ∞pucu Kutusu */
        #hint-box {
            font-size: 1.4em;
            color: #2c3e50;
            margin: 20px 0;
            padding: 20px;
            background-color: #fff3cd; /* A√ßƒ±k Sarƒ± */
            border-left: 6px solid #ffc107;
            border-radius: 8px;
            text-align: left;
            line-height: 1.5;
        }

        /* ƒ∞nput Alanƒ± */
        input[type="text"] {
            padding: 15px 20px;
            width: 70%;
            border-radius: 15px;
            border: 2px solid #dfe6e9;
            text-align: center;
            font-size: 1.3em;
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            color: #2d3436;
            outline: none;
            transition: 0.3s;
            background: #fdfdfd;
        }
        input[type="text"]:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.1);
        }

        /* Butonlar */
        button {
            padding: 14px 28px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1em;
            font-family: 'Nunito', sans-serif;
            font-weight: 800;
            margin: 10px 5px;
            transition: transform 0.2s, box-shadow 0.2s;
            color: white;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        button:hover { transform: translateY(-2px); }
        button:active { transform: translateY(1px); }
        
        #btn-letter { background-color: #f39c12; box-shadow: 0 5px 15px rgba(243, 156, 18, 0.3); }
        #btn-submit { background-color: #2ecc71; box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3); }
        #btn-restart { background-color: #e74c3c; margin-top: 20px; }

        .feedback { 
            margin-top: 15px; 
            font-weight: 800; 
            font-size: 1.3em; 
            min-height: 30px;
        }

        /* Y√ºkleme Ekranƒ± */
        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; display: flex; justify-content: center; align-items: center;
            z-index: 9999; flex-direction: column;
        }
        .spinner {
            width: 50px; height: 50px; border: 5px solid #ecf0f1;
            border-top-color: #3498db; border-radius: 50%;
            animation: spin 1s linear infinite; margin-bottom: 20px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

    </style>
</head>
<body>

    <div id="loading-screen">
        <div class="spinner"></div>
        <h3 style="color:#3498db;">Sorular Hazƒ±rlanƒ±yor...</h3>
    </div>

    <div id="game-area" class="container" style="display:none;">
        <h1>Zeynal √ñƒüretmenle<br>Kelime Avƒ±</h1>
        <div class="subtitle">Bakalƒ±m bug√ºn ka√ß puan toplayacaksƒ±n?</div>
        
        <div class="stats-bar">
            <span id="q-count">Soru: 1/10</span>
            <span id="score" style="color:#e67e22;">Puan: 0</span>
        </div>

        <div id="hint-box">ƒ∞pucu y√ºkleniyor...</div>
        
        <div id="word-display"></div>
        
        <div>
            <button id="btn-letter">Harf Al (-100 Puan)</button>
            <br><br>
            <input type="text" id="guess-input" placeholder="Cevabƒ±nƒ± buraya yaz..." autocomplete="off" onkeypress="handleEnter(event)">
            <br>
            <button id="btn-submit" onclick="checkGuess()">Kontrol Et</button>
        </div>
        
        <div id="feedback" class="feedback"></div>
    </div>

    <div id="final-screen" class="container" style="display:none; text-align:center;">
        <h1 style="color:#2ecc71;">Tebrikler ≈ûampiyon! üèÜ</h1>
        <p style="font-size: 1.4em; color:#7f8c8d;">T√ºm sorularƒ± ba≈üarƒ±yla tamamladƒ±n.</p>
        
        <div style="background:#f8f9fa; padding:20px; border-radius:15px; margin:20px 0;">
            <div style="font-size:1.2em; color:#95a5a6;">TOPLAM PUAN</div>
            <div id="final-score" style="font-size:3em; color:#2c3e50; font-weight:900;">0</div>
        </div>

        <button id="btn-restart" onclick="location.reload()">Tekrar Oyna</button>
    </div>

    <script>
        // ============================================================
        // AYARLAR: GOOGLE SHEETS CSV Lƒ∞NKƒ∞Nƒ∞Zƒ∞ A≈ûAƒûIYA YAPI≈ûTIRIN
        // ============================================================
        const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSoGIsfx3q4A24MbeGif6c1Nnr6NSOw5PS40df8j34MyppgdNp4T4My20jeEH0kKJrpuehciw3J_QgR/pub?gid=0&single=true&output=csv"; 
        // ============================================================

        let questions = [];
        let currentQ = 0;
        let score = 0;
        let revealed = [];

        document.addEventListener('DOMContentLoaded', () => {
            fetchData();
        });

        function fetchData() {
            if(SHEET_CSV_URL.includes("BURAYA_GOOGLE")) {
                alert("L√ºtfen Google Sheets CSV linkini koda ekleyin!");
                return;
            }

            fetch(SHEET_CSV_URL)
                .then(response => response.text())
                .then(data => {
                    parseCSV(data);
                    document.getElementById('loading-screen').style.display = 'none';
                    if(questions.length > 0) {
                        document.getElementById('game-area').style.display = 'block';
                        loadQuestion();
                    } else {
                        alert("Tablodan soru √ßekilemedi. Tablonun dolu olduƒüundan emin olun.");
                    }
                })
                .catch(error => {
                    console.error("Hata:", error);
                    alert("Veri √ßekilemedi. Baƒülantƒ±nƒ±zƒ± kontrol edin.");
                });
        }

        function parseCSV(csvText) {
            const rows = csvText.split(/\r?\n/);
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                if (!row) continue;
                
                const parts = row.split(',');
                if (parts.length >= 2) {
                    // T√ºrk√ße karakter sorunu olmamasƒ± i√ßin trim yapƒ±yoruz
                    const word = parts[0].trim(); 
                    const hint = parts.slice(1).join(',').trim();
                    
                    if(word && hint) {
                        questions.push({ word: word, hint: hint });
                    }
                }
            }
        }

        // --- T√úRK√áE KARAKTER UYUMLU B√úY√úTME FONKSƒ∞YONU ---
        // Bu fonksiyon i -> ƒ∞ ve ƒ± -> I d√∂n√º≈ü√ºm√ºn√º doƒüru yapar.
        function toTurkishUpper(text) {
            return text.toLocaleUpperCase('tr-TR');
        }

        function loadQuestion() {
            if (currentQ >= questions.length) {
                showFinal();
                return;
            }

            const q = questions[currentQ];
            document.getElementById('q-count').innerText = `Soru: ${currentQ + 1}/${questions.length}`;
            document.getElementById('hint-box').innerText = q.hint;
            document.getElementById('guess-input').value = "";
            document.getElementById('feedback').innerText = "";
            
            const display = document.getElementById('word-display');
            display.innerHTML = "";
            // Cevabƒ± kontrol i√ßin alƒ±yoruz ama ekrana basarken orijinal halini saklƒ±yoruz
            revealed = new Array(q.word.length).fill(false);

            for (let i = 0; i < q.word.length; i++) {
                let box = document.createElement('div');
                box.className = 'letter-box';
                box.id = `box-${i}`;
                // Karakter bo≈üluksa (kelime arasƒ±) otomatik a√ßalƒ±m
                if(q.word[i] === ' ') {
                    box.style.opacity = "0"; // Bo≈üluk g√∂r√ºnmez
                    revealed[i] = true;
                } else {
                    box.innerText = "?";
                }
                display.appendChild(box);
            }
        }

        document.getElementById('btn-letter').onclick = function() {
            const q = questions[currentQ];
            let unrevealedIndices = [];
            revealed.forEach((r, index) => { if (!r) unrevealedIndices.push(index); });

            if (unrevealedIndices.length > 0) {
                let randomIndex = unrevealedIndices[Math.floor(Math.random() * unrevealedIndices.length)];
                // Harfi g√∂sterirken de T√ºrk√ße b√ºy√ºtme kullanƒ±yoruz ki estetik dursun
                revealLetter(randomIndex, toTurkishUpper(q.word[randomIndex]));
                
                score -= 100;
                updateScore();
            }
        };

        function revealLetter(index, char) {
            revealed[index] = true;
            let box = document.getElementById(`box-${index}`);
            box.innerText = char;
            box.classList.add('revealed');
        }

        function checkGuess() {
            const input = document.getElementById('guess-input');
            const userGuessRaw = input.value.trim();
            const correctWordRaw = questions[currentQ].word.trim();

            // --- KRƒ∞Tƒ∞K NOKTA: T√úRK√áE KAR≈ûILA≈ûTIRMA ---
            // Hem √∂ƒürencinin yazdƒ±ƒüƒ±nƒ± hem de doƒüru cevabƒ± T√ºrk√ße kurallarƒ±na g√∂re b√ºy√ºt√ºyoruz.
            // B√∂ylece "i" -> "ƒ∞" ve "ƒ±" -> "I" olur. E≈üle≈üme hatasƒ±z saƒülanƒ±r.
            const userGuess = toTurkishUpper(userGuessRaw);
            const correctWord = toTurkishUpper(correctWordRaw);

            if (userGuess === correctWord) {
                document.getElementById('feedback').style.color = "#2ecc71";
                document.getElementById('feedback').innerText = "Harika! Doƒüru Cevap!";
                
                score += (correctWord.replace(/\s/g, '').length * 100);
                updateScore();

                // T√ºm harfleri a√ß
                for(let i=0; i<correctWordRaw.length; i++) {
                    if(correctWordRaw[i] !== ' ') {
                        revealLetter(i, toTurkishUpper(correctWordRaw[i]));
                    }
                }

                setTimeout(() => {
                    currentQ++;
                    loadQuestion();
                }, 1500);

            } else {
                document.getElementById('feedback').style.color = "#e74c3c";
                document.getElementById('feedback').innerText = "Yanlƒ±≈ü cevap, tekrar dene!";
                shakeInput();
            }
        }

        function updateScore() {
            document.getElementById('score').innerText = `Puan: ${score}`;
        }

        function handleEnter(e) {
            if (e.key === "Enter") checkGuess();
        }

        function shakeInput() {
            const input = document.getElementById('guess-input');
            input.style.transform = "translateX(10px)";
            setTimeout(() => { input.style.transform = "translateX(-10px)"; }, 100);
            setTimeout(() => { input.style.transform = "translateX(0)"; }, 200);
        }

        function showFinal() {
            document.getElementById('game-area').style.display = 'none';
            document.getElementById('final-screen').style.display = 'block';
            document.getElementById('final-score').innerText = score;
        }

    </script>
</body>
</html>
